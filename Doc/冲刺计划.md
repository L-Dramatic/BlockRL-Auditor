# SquirRL-Auditor 精简计划

**团队**：5 人  
**时间**：3.5 周  
**策略**：先做前三条（必做），有时间再加第四条（可选）

---

## 一、核心策略

### 渐进式开发原则

1. ✅ **前三条扩展**（必做）- 完全独立，互不依赖
   - Ethereum/GHOST 协议扩展
   - 防御机制（UTB）
   - 命令行工具 + 可视化

2. ⏰ **第四条扩展**（可选）- 有时间再做
   - Block Withholding（矿池间博弈，独立模块）

3. 🎯 **优先级**：基础复现 > 前三条扩展 > 第四条

---

## 二、总任务清单（精简版）

### 🎯 基础任务（必须完成，Week 1-2）

| 编号 | 任务 | 依赖 | 负责人 | 工作量 | 优先级 |
|------|------|------|--------|--------|--------|
| **T1** | 环境验证（environment.py 迁移测试） | 无 | A + C | 中 | P0 |
| **T2** | Gym 包装器（BitcoinSelfishMiningEnv） | T1 | A + C | 高 | P0 |
| **T3** | SB3 训练脚本 | T2 | A | 低 | P0 |
| **T4** | 训练 baseline（α=0.35, Bitcoin） | T3 | E | 低 | P0 |
| **T5** | 模型评估脚本 | T3 | E | 低 | P0 |
| **T6** | 评估 baseline 模型 | T4 + T5 | E | 低 | P0 |
| **T7** | 复现 Figure 3（Bitcoin 曲线图） | T6 | D | 低 | P0 |

### ✅ 扩展 1：Ethereum/GHOST（必做，Week 2）

| 编号 | 任务 | 依赖 | 负责人 | 工作量 | 优先级 |
|------|------|------|--------|--------|--------|
| **T8** | 理解 GHOST 协议规则 | T1 | C | 中 | P1 |
| **T9** | 修改环境支持 GHOST | T2 + T8 | C | 中 | P1 |
| **T10** | 训练 GHOST 攻击策略 | T3 + T9 | E | 低 | P1 |
| **T11** | 对比 Bitcoin vs GHOST | T6 + T10 | D | 低 | P1 |

### ✅ 扩展 2：防御机制 UTB（必做，Week 2）

| 编号 | 任务 | 依赖 | 负责人 | 工作量 | 优先级 |
|------|------|------|--------|--------|--------|
| **T12** | UTB 防御包装器 | T2 | B | 低 | P1 |
| **T13** | 测试不同 UTB 参数 | T4 + T12 | B | 中 | P1 |
| **T14** | 防御效果可视化 | T13 | D | 低 | P1 |

### ✅ 扩展 3：命令行工具（必做，Week 3）

| 编号 | 任务 | 依赖 | 负责人 | 工作量 | 优先级 |
|------|------|------|--------|--------|--------|
| **T15** | CLI 框架（auditor.py） | T3 | A | 低 | P1 |
| **T16** | YAML 配置系统 | T15 | A | 低 | P1 |
| **T17** | 可视化工具集成 | T7 + T11 + T14 | D | 中 | P1 |
| **T18** | 完整文档 + README | T15 + T16 | E | 中 | P1 |

### ⏰ 扩展 4：Block Withholding（可选，Week 3）

| 编号 | 任务 | 依赖 | 负责人 | 工作量 | 优先级 |
|------|------|------|--------|--------|--------|
| **T19** | 阅读 BW 代码（SquirRL-repo/BlockWithholding） | 无 | B | 中 | P2 |
| **T20** | 适配 BW 环境到 Gym | T2 + T19 | B | 高 | P2 |
| **T21** | 训练 BW 策略 | T3 + T20 | E | 低 | P2 |
| **T22** | BW 结果分析 | T21 | D | 低 | P2 |

---

## 三、人员分工（精简版）

### 👨‍💻 人员 A：环境专家 + 工具开发

**核心职责**：环境适配 + 命令行工具

| 任务 | 阶段 | 工作量 |
|------|------|--------|
| T1 环境验证 | Week 1 | ⭐⭐⭐ |
| T2 Gym 包装器 | Week 1 | ⭐⭐⭐⭐ |
| T3 SB3 训练脚本 | Week 1 | ⭐ |
| T15 CLI 框架 | Week 3 | ⭐ |
| T16 YAML 配置 | Week 3 | ⭐ |

**总工作量**：⭐⭐⭐⭐ | **周期**：Week 1 + Week 3

---

### 👨‍💻 人员 B：防御机制专家

**核心职责**：UTB 防御 + Block Withholding（可选）

| 任务 | 阶段 | 工作量 |
|------|------|--------|
| T12 UTB 防御包装器 | Week 2 | ⭐ |
| T13 测试 UTB 参数 | Week 2 | ⭐⭐ |
| T19 阅读 BW 代码（可选） | Week 3 | ⭐⭐ |
| T20 适配 BW 环境（可选） | Week 3 | ⭐⭐⭐ |

**总工作量**：⭐⭐⭐ (必做) + ⭐⭐⭐⭐⭐ (可选) | **周期**：Week 2-3

---

### 👨‍💻 人员 C：协议扩展专家

**核心职责**：GHOST 协议 + 协助环境调试

| 任务 | 阶段 | 工作量 |
|------|------|--------|
| T1 环境验证（协助 A） | Week 1 | ⭐⭐ |
| T2 Gym 包装器（协助 A） | Week 1 | ⭐⭐⭐ |
| T8 理解 GHOST 协议 | Week 2 | ⭐⭐ |
| T9 修改环境支持 GHOST | Week 2 | ⭐⭐ |

**总工作量**：⭐⭐⭐⭐ | **周期**：Week 1-2

---

### 🎨 人员 D：可视化专家

**核心职责**：所有可视化 + 对比分析

| 任务 | 阶段 | 工作量 |
|------|------|--------|
| T7 复现 Figure 3 | Week 1 | ⭐ |
| T11 Bitcoin vs GHOST 对比 | Week 2 | ⭐ |
| T14 防御效果可视化 | Week 2 | ⭐ |
| T17 可视化工具集成 | Week 3 | ⭐⭐ |
| T22 BW 结果分析（可选） | Week 3 | ⭐ |

**总工作量**：⭐⭐⭐ (必做) + ⭐ (可选) | **周期**：Week 1-3

---

### 🚀 人员 E：训练 + 测试 + 整合

**核心职责**：跑所有训练 + 测试 + 文档

| 任务 | 阶段 | 工作量 |
|------|------|--------|
| T4 训练 baseline | Week 1 | ⭐ |
| T5 评估脚本 | Week 1 | ⭐ |
| T6 评估 baseline | Week 1 | ⭐ |
| T10 训练 GHOST 策略 | Week 2 | ⭐ |
| T18 完整文档 | Week 3 | ⭐⭐ |
| T21 训练 BW 策略（可选） | Week 3 | ⭐ |

**总工作量**：⭐⭐⭐ (必做) + ⭐ (可选) | **周期**：Week 1-3

---

## 四、工作量对比

| 人员 | 必做任务 | 可选任务 | 总工作量 | 说明 |
|------|---------|---------|---------|------|
| **A** | 5个 | 0个 | ⭐⭐⭐⭐ | Week 1重，Week 2轻，Week 3轻 |
| **B** | 2个 | 2个 | ⭐⭐⭐ + (⭐⭐⭐⭐⭐) | Week 2重，有余力做BW |
| **C** | 4个 | 0个 | ⭐⭐⭐⭐ | Week 1-2均衡 |
| **D** | 4个 | 1个 | ⭐⭐⭐ + (⭐) | 贯穿全程，均衡 |
| **E** | 5个 | 1个 | ⭐⭐⭐ + (⭐) | 贯穿全程，跑训练为主 |

**均衡度**：✅ 很均衡！
- Week 1：A+C 重（环境），其他人轻
- Week 2：B+C 重（扩展），其他人轻
- Week 3：A+E 重（工具+文档），其他人可做 BW

---

## 五、任务依赖关系

```
【基础线 - Week 1】
T1 环境验证 (A+C)
    ↓
T2 Gym 包装 (A+C)
    ↓
T3 SB3 脚本 (A)
    ↓
T4 训练 baseline (E)
    ↓
T5+T6 评估 (E)
    ↓
T7 Figure 3 (D)


【扩展1: GHOST - Week 2】
T8 理解 GHOST (C)
    ↓
T9 支持 GHOST (C) ← 需要 T2
    ↓
T10 训练 GHOST (E) ← 需要 T3
    ↓
T11 对比图 (D)


【扩展2: UTB - Week 2】
T12 UTB 包装器 (B) ← 需要 T2
    ↓
T13 测试参数 (B) ← 需要 T4
    ↓
T14 防御可视化 (D)


【扩展3: 工具 - Week 3】
T15 CLI 框架 (A) ← 需要 T3
    ↓
T16 YAML 配置 (A)
    ↓
T17 可视化集成 (D) ← 需要 T7, T11, T14
    ↓
T18 文档 (E)


【扩展4: BW（可选）- Week 3】
T19 阅读 BW (B)
    ↓
T20 适配 BW (B) ← 需要 T2
    ↓
T21 训练 BW (E) ← 需要 T3
    ↓
T22 分析 BW (D)
```

---

## 六、关键协作点

### Week 1：A + C 搭档
- **T1 环境验证**：一起调试 environment.py
- **T2 Gym 包装器**：C 理解逻辑，A 写代码
- 目标：让 C 理解代码，帮 A 更快调试

### Week 2：并行开发（互不依赖）
- **B** 做 UTB 防御（独立）
- **C** 做 GHOST 扩展（独立）
- **D** 做可视化（独立）
- **E** 跑训练（独立）

### Week 3：工具整合
- **A** 做 CLI 工具
- **D** 整合所有可视化
- **E** 写文档
- **B**（可选）做 Block Withholding

---

## 七、里程碑

### 🎯 里程碑 1：基础环境可用（Week 1 结束）

| 完成标志 | 负责人 | 标准 |
|---------|--------|------|
| T1 环境验证通过 | A + C | environment.py 能在 Python 3.9+ 运行 |
| T2 Gym 包装能用 | A + C | 能用 Stable-Baselines3 训练 |
| T3 SB3 脚本能跑 | A | 训练脚本无报错 |
| T4 baseline 训练完 | E | α=0.35 模型训练完成 |

**检验方式**：能训练出一个 baseline 模型

---

### ✅ 里程碑 2：基础复现成功（Week 2 初）

| 完成标志 | 负责人 | 标准 |
|---------|--------|------|
| T5+T6 评估完成 | E | 有评估数据 |
| T7 Figure 3 复现 | D | 曲线图与论文类似 |

**检验方式**：能展示复现结果

---

### ✅ 里程碑 3：前三条扩展完成（Week 2 结束）

| 完成标志 | 负责人 | 标准 |
|---------|--------|------|
| T9+T10 GHOST 完成 | C + E | 训练好 GHOST 模型 |
| T11 对比图完成 | D | Bitcoin vs GHOST 对比 |
| T12+T13 UTB 完成 | B | 防御效果数据 |
| T14 防御可视化 | D | 防御效果图表 |

**检验方式**：有三个扩展的实验结果

---

### 🎉 里程碑 4：工具完成（Week 3 结束）

| 完成标志 | 负责人 | 标准 |
|---------|--------|------|
| T15+T16 CLI 工具 | A | 能用命令行跑实验 |
| T17 可视化集成 | D | 所有图表整合好 |
| T18 文档完成 | E | README + 使用文档 |

**检验方式**：能演示完整工具链

---

### ⏰ 里程碑 5：BW 扩展（可选，Week 3）

| 完成标志 | 负责人 | 标准 |
|---------|--------|------|
| T19+T20 BW 适配 | B | BW 环境能用 |
| T21 BW 训练 | E | 训练好 BW 模型 |
| T22 BW 分析 | D | BW 结果图表 |

**检验方式**：有 BW 的实验结果

---

## 八、最终产出

### 📂 代码结构

```
SquirRL-Auditor/
├── src/
│   ├── environment/
│   │   ├── gym_wrapper.py           [A] Gym 包装器
│   │   ├── ghost_env.py             [C] GHOST 环境
│   │   └── utb_defense.py           [B] UTB 防御
│   ├── agents/
│   │   ├── sb3_trainer.py           [A] SB3 训练脚本
│   │   └── evaluate.py              [E] 评估脚本
│   ├── visualization/
│   │   ├── reward_plot.py           [D] 奖励曲线
│   │   ├── comparison_plot.py       [D] 对比图
│   │   └── defense_plot.py          [D] 防御效果图
│   └── blockwithholding/            [可选]
│       └── bw_env.py                [B] BW 环境
├── auditor.py                       [A] 命令行工具
├── configs/
│   ├── bitcoin.yaml
│   ├── ghost.yaml
│   └── utb.yaml
├── models/                          [E 训练的模型]
│   ├── bitcoin_baseline.zip
│   ├── ghost_attack.zip
│   └── bw_strategy.zip (可选)
├── results/                         [实验结果]
│   ├── figure3_reproduction.png
│   ├── bitcoin_vs_ghost.png
│   ├── utb_defense_effect.png
│   └── experiments.csv
├── docs/
│   ├── README.md                    [E]
│   ├── USAGE.md                     [E]
│   └── EXPERIMENTS.md               [E]
└── requirements.txt
```

### 📊 实验结果

**必做结果**：
1. ✅ Figure 3 复现（Bitcoin 自私挖矿）
2. ✅ Bitcoin vs GHOST 对比
3. ✅ UTB 防御效果分析

**可选结果**：
4. ⏰ Block Withholding 攻击分析

### 📝 文档

1. **README.md**：项目介绍、安装、快速开始
2. **USAGE.md**：命令行工具使用指南
3. **EXPERIMENTS.md**：实验结果详细说明

---

## 九、核心原则

### 1. 渐进式开发 🎯
- **先做必做，再做可选**：前三条扩展必须完成，BW 有时间再做
- **先基础，后扩展**：Week 1 搞定环境，Week 2-3 做扩展
- **先复现，后创新**：先复现 Figure 3，再做对比实验

### 2. 并行开发 ⚡
- **Week 2 的三个扩展完全独立**：GHOST、UTB、可视化互不依赖
- **人员合理分配**：Week 1 重头在 A+C，Week 2 分散到各人

### 3. 保底策略 ✅
- **最低交付**：基础复现 + GHOST + UTB（不含 BW）
- **良好交付**：基础复现 + 前三条扩展 + 完整工具
- **优秀交付**：基础复现 + 前三条 + 工具 + BW

### 4. 灵活协作 🤝
- **Week 1**：A+C 搭档（环境调试）
- **Week 2**：各人独立（并行扩展）
- **Week 3**：谁先完成谁帮忙（做 BW 或美化）

### 5. 时间把控 ⏰
- **每周五检查进度**：确认里程碑是否达成
- **Week 2 结束决定是否做 BW**：如果前三条没完成，放弃 BW
- **Week 3 前半周必须封板**：留后半周整理文档

---

## 十、成功标准

### 最低标准（82-85分）
- ✅ 基础复现成功（Figure 3）
- ✅ 至少完成 GHOST + UTB 两个扩展
- ✅ 有基础可视化
- ✅ 代码能跑

### 良好标准（86-90分）
- ✅ 基础复现成功
- ✅ 前三条扩展全部完成
- ✅ 命令行工具可用
- ✅ 完整文档

### 优秀标准（91-95分）
- ✅ 基础复现成功
- ✅ 前三条扩展全部完成
- ✅ 命令行工具 + 配置系统
- ✅ **Block Withholding** 也完成
- ✅ 完整文档 + 演示视频

---

## 结语

**核心思路**：前三条扩展（GHOST + UTB + 工具）完全独立，互不依赖，可以并行开发。Block Withholding 作为独立模块，有时间再加。

**关键时间点**：
- Week 1 结束：环境必须可用
- Week 2 结束：前三条必须完成
- Week 3 前半：决定是否做 BW
- Week 3 后半：封板 + 文档

**预期结果**：稳稳 85+ 分，冲刺 90+ 分！🚀
