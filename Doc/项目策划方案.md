# SquirRL-Auditor: åŒºå—é“¾å…±è¯†åè®®å®‰å…¨å®¡è®¡å·¥å…·

**é¡¹ç›®å®šä½**ï¼šåŸºäºæ·±åº¦å¼ºåŒ–å­¦ä¹ çš„åŒºå—é“¾æ¿€åŠ±æœºåˆ¶æ¼æ´æ£€æµ‹ç³»ç»Ÿ

**å°ç»„**ï¼š8äºº | **æ—¶é—´**ï¼š3.5å‘¨ | **æ–¹å‘**ï¼šåŒºå—é“¾+RL

---

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 æ ¸å¿ƒç›®æ ‡

âœ… **å¤ç°éªŒè¯**ï¼šå¤ç° SquirRL è®ºæ–‡æ ¸å¿ƒç»“æœï¼ˆBitcoinè‡ªç§æŒ–çŸ¿ï¼‰  
âœ… **åœºæ™¯æ‰©å±•**ï¼šåŠ¨æ€ç®—åŠ›ã€é˜²å¾¡æœºåˆ¶ã€å¤šä»£ç†åˆ†æ  
âœ… **å·¥å…·å°è£…**ï¼šå‚æ•°åŒ–é…ç½® + è‡ªåŠ¨åŒ–æµ‹è¯•  
âœ… **å¯è§†åŒ–**ï¼šåˆ†å‰æ ‘åŠ¨ç”» + æ”¶ç›Šå¯¹æ¯”å›¾

### 1.2 åˆ›æ–°ç‚¹

| ç»´åº¦ | åŸè®ºæ–‡ | æˆ‘ä»¬çš„æ‰©å±• |
|------|--------|-----------|
| ç®—åŠ›æ¨¡å‹ | å›ºå®šæˆ–é«˜æ–¯å™ªå£° | âœ¨ å‘¨æœŸæ€§æ³¢åŠ¨ã€è·³è·ƒè¿‡ç¨‹ |
| **éªŒè¯æ–¹å¼** | ç†è®ºæ¨¡æ‹Ÿ | âœ¨ **çœŸå®æ•°æ®å›æµ‹**ï¼ˆæ–°å¢ï¼‰ |
| é˜²å¾¡æœºåˆ¶ | æ—  | âœ¨ UTBé˜²å¾¡è¯„ä¼° |
| **å®ç”¨ä»·å€¼** | å­¦æœ¯ç ”ç©¶ | âœ¨ **çœŸå®å¨èƒè¯„ä¼°** |
| å¯ç”¨æ€§ | ç ”ç©¶ä»£ç  | âœ¨ å‘½ä»¤è¡Œå·¥å…· + å¯è§†åŒ– |

---

## äºŒã€æŠ€æœ¯æ–¹æ¡ˆ

### 2.1 æ ¸å¿ƒç­–ç•¥ï¼šéƒ¨åˆ†è¿ç§»ï¼ˆç°ä»£ç¯å¢ƒ + éªŒè¯åŸºå‡†ï¼‰

**âš ï¸ å…³é”®å†³ç­–**ï¼šæå–æ ¸å¿ƒç¯å¢ƒåˆ°ç°ä»£æ¡†æ¶ï¼ŒDockerä»…ä½œéªŒè¯

**æ ¸å¿ƒå‘ç°**ï¼š
```python
# environment.py çš„å¯¼å…¥ï¼ˆéªŒè¯ç»“æœï¼‰
import numpy as np
import scipy
import matplotlib.pyplot as plt
# âŒ æ²¡æœ‰ import tensorflowï¼
```

âœ… **environment.py ä¸ä¾èµ– TensorFlowï¼å¯ç›´æ¥è¿ç§»åˆ° Python 3.9+**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç°ä»£å¼€å‘ç¯å¢ƒï¼ˆPython 3.9+ï¼‰- ä¸»è¦å·¥ä½œåŒº     â”‚
â”‚  âœ… environment.pyï¼ˆç›´æ¥è¿ç§»ï¼Œåªä¾èµ–numpyï¼‰  â”‚
â”‚  âœ¨ Stable-Baselines3ï¼ˆæ›¿ä»£TF 1.14ï¼‰        â”‚
â”‚  âœ¨ åŠ¨æ€ç®—åŠ›æ¨¡å‹                            â”‚
â”‚  âœ¨ é˜²å¾¡æœºåˆ¶                                â”‚
â”‚  âœ¨ çœŸå®æ•°æ®å›æµ‹                            â”‚
â”‚  âœ¨ å¯è§†åŒ–ç³»ç»Ÿ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  DockeréªŒè¯ç¯å¢ƒï¼ˆPython 3.6 + TF 1.14ï¼‰     â”‚
â”‚  âš ï¸ ä»…ç”¨äºéªŒè¯baselineï¼ˆè·‘1-2æ¬¡ï¼‰           â”‚
â”‚  âš ï¸ Week 1é…ç½®ï¼Œåç»­ä¸å†ä½¿ç”¨                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ºä»€ä¹ˆè¿™æ ·åš**ï¼š
- âœ… **å¼€å‘æ•ˆç‡æå‡10å€**ï¼šä¸éœ€è¦è¿›Dockerè°ƒè¯•
- âœ… **ä»£ç æ›´ç°ä»£åŒ–**ï¼šStable-Baselines3 ä»£ç é‡å‡å°‘50å€
- âœ… **è°ƒè¯•æ›´æ–¹ä¾¿**ï¼šVSCodeæ–­ç‚¹è°ƒè¯•ã€å®æ—¶å¯è§†åŒ–
- âœ… **æ–¹æ¡ˆBæ›´å®¹æ˜“**ï¼šçœŸå®æ•°æ®é‡‡é›†éœ€è¦ç°ä»£åº“ï¼ˆrequests, pandas, plotlyï¼‰
- âœ… **ä»æœ‰éªŒè¯åŸºå‡†**ï¼šDockerä½œä¸ºä¿é™©ï¼ŒéªŒè¯è¿ç§»æ­£ç¡®æ€§

### 2.2 ç³»ç»Ÿæ¶æ„

```
SquirRL-Auditor/
â”œâ”€â”€ src/ (Python 3.9+ - ä¸»è¦å¼€å‘ç¯å¢ƒ)
â”‚   â”œâ”€â”€ environment/              # è¿ç§»çš„æ ¸å¿ƒç¯å¢ƒ
â”‚   â”‚   â”œâ”€â”€ blockchain_env.py     # åŸenvironment.pyï¼ˆå·²éªŒè¯å¯è¿ç§»ï¼‰
â”‚   â”‚   â”œâ”€â”€ gym_wrapper.py        # Gymæ¥å£åŒ…è£…ï¼ˆå…¼å®¹SB3ï¼‰
â”‚   â”‚   â””â”€â”€ dynamic_alpha.py      # æ–°å¢ï¼šåŠ¨æ€ç®—åŠ›
â”‚   â”œâ”€â”€ agents/                   # ç°ä»£RLç®—æ³•
â”‚   â”‚   â”œâ”€â”€ sb3_trainer.py        # Stable-Baselines3è®­ç»ƒ
â”‚   â”‚   â””â”€â”€ policy_loader.py      # ç­–ç•¥åŠ è½½ä¸æµ‹è¯•
â”‚   â”œâ”€â”€ defenses/                 # é˜²å¾¡æœºåˆ¶
â”‚   â”‚   â”œâ”€â”€ utb_defense.py
â”‚   â”‚   â””â”€â”€ dda_defense.py
â”‚   â”œâ”€â”€ data/                     # çœŸå®æ•°æ®æ¨¡å—ï¼ˆæ–¹æ¡ˆBï¼‰
â”‚   â”‚   â”œâ”€â”€ fetcher.py
â”‚   â”‚   â”œâ”€â”€ processor.py
â”‚   â”‚   â””â”€â”€ real_data_alpha.py
â”‚   â”œâ”€â”€ visualization/            # å¯è§†åŒ–
â”‚   â”‚   â”œâ”€â”€ fork_tree.py
â”‚   â”‚   â”œâ”€â”€ timeline.py
â”‚   â”‚   â””â”€â”€ dashboard.py
â”‚   â””â”€â”€ auditor.py                # å·¥å…·å…¥å£
â”‚
â”œâ”€â”€ legacy_docker/ (éªŒè¯ç”¨)       # ä»…ç”¨äºbaselineéªŒè¯
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ verify_baseline.py        # éªŒè¯è„šæœ¬
â”‚   â””â”€â”€ baseline_results/         # ä¿å­˜å‚ç…§ç»“æœ
â”‚
â”œâ”€â”€ experiments/
â”‚   â”œâ”€â”€ baseline_verify/          # Week 1éªŒè¯å®éªŒ
â”‚   â”œâ”€â”€ dynamic_alpha/            # æ‰©å±•å®éªŒ
â”‚   â”œâ”€â”€ defense_eval/
â”‚   â””â”€â”€ real_data_backtest/       # æ–¹æ¡ˆBå®éªŒ
â”‚
â””â”€â”€ requirements.txt              # Python 3.9+ ä¾èµ–
```

### 2.3 ç¯å¢ƒé…ç½®æ–¹æ¡ˆï¼ˆéƒ¨åˆ†è¿ç§»ç­–ç•¥ï¼‰

#### æ–¹æ¡ˆï¼šç°ä»£ç¯å¢ƒä¸ºä¸» + DockeréªŒè¯

**æ ¸å¿ƒå‘ç°**ï¼š
- âœ… `environment.py` åªä¾èµ– numpy, scipy, matplotlib
- âŒ åªæœ‰è®­ç»ƒè„šæœ¬ï¼ˆbtc.py, eth.pyï¼‰ä¾èµ– TensorFlow 1.14
- âœ… å¯ä»¥æå–ç¯å¢ƒï¼Œç”¨ç°ä»£æ¡†æ¶é‡å†™è®­ç»ƒéƒ¨åˆ†

**æ–°çš„æŠ€æœ¯æ ˆ**ï¼š

```txt
# requirements.txt (Python 3.9+)
numpy>=1.21.0
scipy>=1.7.0
matplotlib>=3.5.0
pandas>=1.4.0

# ç°ä»£RLæ¡†æ¶ï¼ˆæ›¿ä»£TF 1.14ï¼‰
stable-baselines3>=2.0.0
torch>=1.11.0
gymnasium>=0.28.0

# çœŸå®æ•°æ®é‡‡é›†ï¼ˆæ–¹æ¡ˆBï¼‰
requests>=2.28.0
beautifulsoup4>=4.11.0

# å¯è§†åŒ–
plotly>=5.0.0
streamlit>=1.20.0

# å·¥å…·
pyyaml>=6.0
tqdm>=4.64.0
```

**å®æ–½æ­¥éª¤**ï¼š

**Step 1ï¼šéªŒè¯ç¯å¢ƒå¯è¿ç§»ï¼ˆWeek 1 Day 1ï¼Œ30åˆ†é’Ÿï¼‰**
```python
# test_migration.py
import sys
sys.path.append('SquirRL-repo/SingleAgent')

# æµ‹è¯•å¯¼å…¥
from environment import SM_env, SM_env_with_stale

# æµ‹è¯•åŸºæœ¬åŠŸèƒ½
env = SM_env(max_hidden_block=20, 
             attacker_fraction=0.35, 
             follower_fraction=0.5)

state = env.reset()
next_state, reward, done, info = env.step(state, action=2)
print(f"âœ… è¿ç§»æˆåŠŸ: state={state}, reward={reward}")
```

**Step 2ï¼šç”¨Stable-Baselines3é‡å†™è®­ç»ƒï¼ˆWeek 1 Day 2-3ï¼‰**
```python
# modern_trainer.py
from stable_baselines3 import DQN
import gymnasium as gym
from environment import SM_env_with_stale

# åŒ…è£…ä¸ºGymæ¥å£
class SquirRLEnv(gym.Env):
    def __init__(self, alpha=0.35):
        self.env = SM_env_with_stale(
            max_hidden_block=20,
            attacker_fraction=alpha,
            follower_fraction=0.5
        )
        self.observation_space = gym.spaces.Box(...)
        self.action_space = gym.spaces.Discrete(...)
    
    def reset(self, seed=None):
        self.current_state = self.env.reset()
        return self._state_to_obs(self.current_state), {}
    
    def step(self, action):
        next_state, reward, done, info = self.env.step(
            self.current_state, action
        )
        self.current_state = next_state
        return self._state_to_obs(next_state), reward, done, False, info

# è®­ç»ƒï¼ˆåªéœ€å‡ è¡Œï¼ï¼‰
env = SquirRLEnv(alpha=0.35)
model = DQN("MlpPolicy", env, learning_rate=1e-4, verbose=1)
model.learn(total_timesteps=100000)
model.save("squirrl_modern")
```

**å¯¹æ¯”**ï¼š
| æ–¹æ¡ˆ | ä»£ç é‡ | è®­ç»ƒæ—¶é—´ | è°ƒè¯•éš¾åº¦ | å¯æ‰©å±•æ€§ |
|------|--------|---------|---------|---------|
| åŸTF 1.14 | ~500è¡Œ | æ…¢ | å›°éš¾ï¼ˆDockerï¼‰ | å·® |
| SB3ç°ä»£æ–¹æ¡ˆ | ~50è¡Œ | å¿« | å®¹æ˜“ï¼ˆæœ¬åœ°ï¼‰ | ä¼˜ |

**Step 3ï¼šDockerä»…ä½œéªŒè¯ï¼ˆWeek 1 Day 3ï¼Œå¯é€‰ï¼‰**
```bash
# ä»…ç”¨äºéªŒè¯baselineï¼Œè·‘1-2æ¬¡å³å¯
docker run --rm squirrl-legacy:v1.0 \
  python btc.py --alpha 0.35 --episodes 10
# ä¿å­˜ç»“æœä½œä¸ºå‚ç…§
```

**ä¼˜åŠ¿å¯¹æ¯”**ï¼š
| ç»´åº¦ | çº¯Dockeræ–¹æ¡ˆ | éƒ¨åˆ†è¿ç§»æ–¹æ¡ˆï¼ˆæ¨èï¼‰|
|------|-------------|-------------------|
| å¼€å‘æ•ˆç‡ | â­â­ | â­â­â­â­â­ |
| è°ƒè¯•ä½“éªŒ | â­â­ | â­â­â­â­â­ |
| æ‰©å±•éš¾åº¦ | â­â­â­ | â­â­â­â­â­ |
| é…ç½®å¤æ‚åº¦ | â­â­â­â­ | â­â­ |
| ç»“æœå¯é æ€§ | â­â­â­â­â­ | â­â­â­â­ |

### 2.4 æ ¸å¿ƒæ¨¡å—

#### æ¨¡å—1ï¼šç¯å¢ƒè¿ç§»ä¸åŒ…è£…ï¼ˆWeek 1ï¼‰

**æ ¸å¿ƒä»»åŠ¡**ï¼šæå– `environment.py` å¹¶åŒ…è£…ä¸ºæ ‡å‡†Gymæ¥å£

**Step 1ï¼šç›´æ¥å¤åˆ¶ï¼ˆå·²éªŒè¯æ— TFä¾èµ–ï¼‰**
```bash
cp SquirRL-repo/SingleAgent/environment.py src/environment/blockchain_env.py
```

**Step 2ï¼šGymæ¥å£åŒ…è£…**
```python
# src/environment/gym_wrapper.py
import gymnasium as gym
from blockchain_env import SM_env_with_stale

class BitcoinSelfishMiningEnv(gym.Env):
    """æ ‡å‡†Gymæ¥å£ï¼Œå…¼å®¹Stable-Baselines3"""
    
    def __init__(self, alpha=0.35, gamma=0.5, max_blocks=20):
        super().__init__()
        
        self.env = SM_env_with_stale(
            max_hidden_block=max_blocks,
            attacker_fraction=alpha,
            follower_fraction=gamma,
            rule="longest",
            stale_rate=0.0
        )
        
        # å®šä¹‰æ ‡å‡†ç©ºé—´
        self.observation_space = gym.spaces.Box(
            low=0, high=100, 
            shape=(self.env._state_vector_n,), 
            dtype=np.float32
        )
        self.action_space = gym.spaces.Discrete(
            self.env._action_space_n
        )
```

**å·¥ä½œé‡**ï¼šçº¦100è¡Œæ–°ä»£ç ï¼Œ1äºº2å¤©

#### æ¨¡å—2ï¼šç°ä»£RLè®­ç»ƒï¼ˆWeek 1-2ï¼‰

**ç”¨Stable-Baselines3æ›¿ä»£TF 1.14**

```python
# src/agents/sb3_trainer.py
from stable_baselines3 import DQN
from stable_baselines3.common.callbacks import EvalCallback

def train_selfish_mining_agent(alpha=0.35, total_steps=100000):
    """è®­ç»ƒè‡ªç§æŒ–çŸ¿ä»£ç†ï¼ˆç°ä»£å®ç°ï¼‰"""
    
    # åˆ›å»ºç¯å¢ƒ
    env = BitcoinSelfishMiningEnv(alpha=alpha)
    eval_env = BitcoinSelfishMiningEnv(alpha=alpha)
    
    # åˆ›å»ºDQNï¼ˆæ›¿ä»£åŸæ¥çš„æ‰‹å†™Double-DQNï¼‰
    model = DQN(
        "MlpPolicy",
        env,
        learning_rate=1e-4,
        buffer_size=50000,
        learning_starts=10000,
        batch_size=64,
        gamma=0.99,
        target_update_interval=1000,
        exploration_fraction=0.3,
        verbose=1,
        tensorboard_log="./logs/"
    )
    
    # è¯„ä¼°å›è°ƒ
    eval_callback = EvalCallback(
        eval_env, 
        best_model_save_path='./models/',
        eval_freq=5000,
        verbose=1
    )
    
    # è®­ç»ƒ
    model.learn(
        total_timesteps=total_steps,
        callback=eval_callback
    )
    
    return model
```

**ä»£ç é‡å¯¹æ¯”**ï¼š
- åŸTF 1.14å®ç°ï¼š~500è¡Œï¼ˆæ‰‹å†™DQNã€ç»éªŒå›æ”¾ã€ç›®æ ‡ç½‘ç»œï¼‰
- SB3å®ç°ï¼š~50è¡Œï¼ˆè°ƒç”¨æˆç†Ÿåº“ï¼‰

**å·¥ä½œé‡**ï¼šçº¦150è¡Œæ–°ä»£ç ï¼Œ1äºº3å¤©

#### æ¨¡å—3ï¼šåŠ¨æ€ç®—åŠ›æ‰©å±•ï¼ˆWeek 2ï¼‰

```python
# src/environment/dynamic_alpha.py
class DynamicAlphaEnv(BitcoinSelfishMiningEnv):
    """æ”¯æŒåŠ¨æ€ç®—åŠ›çš„ç¯å¢ƒ"""
    
    def __init__(self, alpha_mode='periodic', **kwargs):
        super().__init__(**kwargs)
        self.alpha_mode = alpha_mode
        self.base_alpha = kwargs.get('alpha', 0.35)
        self.time_step = 0
        
    def reset(self, seed=None):
        self.time_step = 0
        return super().reset(seed)
    
    def step(self, action):
        # åŠ¨æ€æ›´æ–°alpha
        current_alpha = self._get_dynamic_alpha()
        self.env._attacker_fraction = current_alpha
        
        obs, reward, done, truncated, info = super().step(action)
        self.time_step += 1
        
        info['current_alpha'] = current_alpha
        return obs, reward, done, truncated, info
    
    def _get_dynamic_alpha(self):
        if self.alpha_mode == 'periodic':
            # å‘¨æœŸæ€§æ³¢åŠ¨
            return self.base_alpha + 0.05 * np.sin(2*np.pi*self.time_step/1000)
        elif self.alpha_mode == 'jump':
            # è·³è·ƒè¿‡ç¨‹
            if np.random.rand() < 0.001:
                self.base_alpha = min(self.base_alpha + 0.05, 0.49)
            return self.base_alpha
```

**å·¥ä½œé‡**ï¼šçº¦100è¡Œæ–°ä»£ç ï¼Œ1äººå‘¨

#### æ¨¡å—4ï¼šé˜²å¾¡æœºåˆ¶ï¼ˆWeek 2ï¼‰

```python
# src/defenses/defense_wrapper.py
class DefenseWrapper(gym.Wrapper):
    """é˜²å¾¡æœºåˆ¶åŒ…è£…å™¨"""
    
    def __init__(self, env, defense_type='UTB'):
        super().__init__(env)
        self.defense_type = defense_type
        
    def step(self, action):
        if self.defense_type == 'UTB':
            # Uniform Tie-Breaking
            self.env.unwrapped.env._gamma = 0.5
        elif self.defense_type == 'DDA':
            # Dynamic Difficulty Adjustment
            self._adjust_difficulty()
        
        return self.env.step(action)
```

**å·¥ä½œé‡**ï¼šçº¦80è¡Œæ–°ä»£ç ï¼Œ1äºº3å¤©

#### æ¨¡å—5ï¼šå¯è§†åŒ–ï¼ˆWeek 3ï¼‰
- åˆ†å‰æ ‘åŠ¨ç”»ï¼ˆNetworkX + Matplotlibï¼‰
- æ—¶é—´è½´å¯è§†åŒ–ï¼ˆPlotly - æ–¹æ¡ˆBï¼‰
- äº¤äº’å¼ä»ªè¡¨ç›˜ï¼ˆStreamlitï¼‰

**å·¥ä½œé‡**ï¼šçº¦250è¡Œæ–°ä»£ç ï¼Œ1äººå‘¨

---

## ä¸‰ã€å®éªŒè®¾è®¡

### 3.1 å¤ç°å®éªŒï¼ˆéªŒè¯æ­£ç¡®æ€§ï¼‰

| å®éªŒ | å†…å®¹ | å¯¹åº”è®ºæ–‡ |
|------|------|---------|
| E1 | Bitcoin Î±æ‰«æ | Figure 3 |
| E2 | Block Withholding | Figure 11 |

### 3.2 æ‰©å±•å®éªŒï¼ˆåˆ›æ–°ç‚¹ï¼‰

**Aç»„ï¼šåŠ¨æ€ç®—åŠ›**
- A1ï¼šå‘¨æœŸæ³¢åŠ¨ä¸‹ SquirRL vs OSM é²æ£’æ€§
- A2ï¼šè·³è·ƒè¿‡ç¨‹ä¸‹æ”»å‡»æˆåŠŸç‡

**Bç»„ï¼šé˜²å¾¡è¯„ä¼°**
- B1ï¼šUTB ä½¿æ”»å‡»æ”¶ç›Šä¸‹é™å¤šå°‘ï¼Ÿ
- B2ï¼šæœ€ä¼˜ DDA å‚æ•°æœç´¢

**Cç»„ï¼šå¤šä»£ç†ç¨³å®šæ€§**
- C1ï¼š3ä¸ªæ”»å‡»è€…çš„ä¸´ç•Œç®—åŠ›ç»„åˆ
- C2ï¼šè”ç›Ÿå½¢æˆæ˜¯å¦ç¨³å®šï¼Ÿ

---

## å››ã€å®æ–½è®¡åˆ’ï¼ˆ8äººåˆ†å·¥ï¼‰

### é˜¶æ®µä¸€ï¼šç¯å¢ƒè¿ç§» + åŸºç¡€éªŒè¯ï¼ˆç¬¬1å‘¨ï¼‰

**ğŸ‘¥ ç»„1ï¼šç¯å¢ƒè¿ç§» + ç°ä»£è®­ç»ƒï¼ˆ2äººï¼‰**

**Week 1ä»»åŠ¡**ï¼ˆDay 1-3ï¼‰ï¼š
1. **éªŒè¯è¿ç§»å¯è¡Œæ€§**ï¼ˆDay 1ä¸Šåˆï¼‰
   ```bash
   python test_migration.py  # éªŒè¯environment.pyä¸ä¾èµ–TF
   ```
2. **ç¼–å†™GymåŒ…è£…å™¨**ï¼ˆDay 1ä¸‹åˆ-Day 2ï¼‰
   - å®ç° `BitcoinSelfishMiningEnv` ç±»
   - æµ‹è¯•ä¸Stable-Baselines3å…¼å®¹æ€§
3. **SB3è®­ç»ƒè„šæœ¬**ï¼ˆDay 3-5ï¼‰
   - ç”¨DQNè®­ç»ƒÎ±=0.35åœºæ™¯
   - éªŒè¯æ”¶æ•›æ€§

**Week 1ä»»åŠ¡**ï¼ˆDay 4-7ï¼‰ï¼š
- è®­ç»ƒbaselineæ¨¡å‹ï¼ˆÎ±=0.35, 0.40, 0.45ï¼‰
- ï¼ˆå¯é€‰ï¼‰é…ç½®DockeréªŒè¯ç¯å¢ƒ
- è¾“å‡ºï¼šç°ä»£ç¯å¢ƒçš„baselineç»“æœ

**å…³é”®äº§å‡º**ï¼š
- âœ… å¯ç”¨çš„Gymç¯å¢ƒåŒ…è£…å™¨
- âœ… SB3è®­ç»ƒè„šæœ¬
- âœ… Baselineæ¨¡å‹ï¼ˆç”¨äºåç»­å¯¹æ¯”ï¼‰
- âœ… éªŒè¯æŠ¥å‘Šï¼ˆè¿ç§»æ­£ç¡®æ€§ï¼‰

**ğŸ‘¥ ç»„2ï¼šä»£ç ç†è§£ + å®éªŒè®¾è®¡ï¼ˆ3äººï¼‰**

**Week 1ä»»åŠ¡**ï¼š
- æ·±å…¥é˜…è¯» `environment.py`ï¼ˆ2888è¡Œï¼‰
  - äººAï¼šçŠ¶æ€ç©ºé—´æ„å»ºï¼ˆç¬¬1-1000è¡Œï¼‰
  - äººBï¼šçŠ¶æ€è½¬ç§»é€»è¾‘ï¼ˆç¬¬1001-2000è¡Œï¼‰
  - äººCï¼šå¥–åŠ±å‡½æ•°ï¼ˆç¬¬2001-2888è¡Œï¼‰
- è®¾è®¡æ‰©å±•å®éªŒæ–¹æ¡ˆ
- ç¼–å†™å®éªŒé…ç½®æ–‡ä»¶ï¼ˆYAMLï¼‰

**å…³é”®äº§å‡º**ï¼š
- âœ… ä»£ç ç†è§£æ–‡æ¡£
- âœ… æ‰©å±•å®éªŒè®¾è®¡æ–‡æ¡£
- âœ… å®éªŒé…ç½®æ¨¡æ¿

**ğŸ‘¥ ç»„3ï¼šæ•°æ®é‡‡é›† + çœŸå®å›æµ‹ï¼ˆ2äººï¼‰- æ–¹æ¡ˆBæ ¸å¿ƒ

**Week 1ä»»åŠ¡**ï¼š
- äººAï¼ˆæ•°æ®å·¥ç¨‹å¸ˆï¼‰ï¼š
  - Day 1-2: å­¦ä¹ Blockchain.com/BTC.com API
  - Day 3-5: ç¼–å†™æ•°æ®çˆ¬å–è„šæœ¬
  - Day 6-7: å¼€å§‹é‡‡é›†2023å¹´æ•°æ®

**å…³é”®äº§å‡º**ï¼š
- âœ… æ•°æ®é‡‡é›†è„šæœ¬
- âœ… éƒ¨åˆ†å†å²æ•°æ®ï¼ˆè‡³å°‘Q1ï¼‰

### é˜¶æ®µäºŒï¼šæ‰©å±•å¼€å‘ + å·¥å…·å°è£…ï¼ˆç¬¬2-3å‘¨ï¼‰

**ğŸ‘¥ ç»„1+2ï¼šæ‰©å±•å®éªŒæ‰§è¡Œï¼ˆ5äººï¼‰**

**Week 2ä»»åŠ¡**ï¼š
- äººAï¼šåŠ¨æ€ç®—åŠ›ç¯å¢ƒå®ç°
- äººBï¼šé˜²å¾¡æœºåˆ¶å®ç°
- äººCï¼šUTBé˜²å¾¡å®éªŒ
- äººDï¼ˆæ•°æ®ï¼‰ï¼šç»§ç»­æ•°æ®é‡‡é›†ï¼Œæ•°æ®æ¸…æ´—
- äººEï¼šRealDataAlphaProcessç±»å®ç°

**Week 3ä»»åŠ¡**ï¼š
- äººAï¼šå®Œæˆå‘¨æœŸæ€§ç®—åŠ›å®éªŒ
- äººB+Cï¼šå®Œæˆé˜²å¾¡æœºåˆ¶å®éªŒ
- äººD+Eï¼šå®ŒæˆçœŸå®æ•°æ®å›æµ‹ï¼ˆ**æ–¹æ¡ˆBæ ¸å¿ƒ**ï¼‰

**æ–¹æ¡ˆBè¯¦ç»†åˆ†å·¥**ï¼š
```
äººDï¼ˆæ•°æ®å·¥ç¨‹å¸ˆï¼‰ï¼š
- Week 1: APIå­¦ä¹ ä¸è„šæœ¬å¼€å‘
- Week 2: æ•°æ®çˆ¬å–ä¸æ¸…æ´—
- Week 3: æ•°æ®éªŒè¯å’Œè¡¥å…¨

äººEï¼ˆç®—æ³•å·¥ç¨‹å¸ˆï¼‰ï¼š
- Week 1: é˜…è¯»ä»£ç ï¼Œç†è§£ç¯å¢ƒ
- Week 2: å®ç°RealDataAlphaProcessç±»
- Week 3: é›†æˆåˆ°ç¯å¢ƒï¼Œè¿è¡Œæ‰¹é‡å®éªŒ
```

**ğŸ‘¥ ç»„4ï¼šå¯è§†åŒ– + å·¥å…·åŒ–ï¼ˆ3äººï¼‰**

**Week 2ä»»åŠ¡**ï¼š
- äººAï¼šå‘½ä»¤è¡Œå·¥å…·æ¡†æ¶
- äººBï¼šåŸºç¡€å¯è§†åŒ–ï¼ˆåˆ†å‰æ ‘ï¼‰
- äººCï¼šæ—¶é—´è½´å¯è§†åŒ–åŸå‹ï¼ˆæ–¹æ¡ˆBï¼‰

**Week 3ä»»åŠ¡**ï¼š
- äººAï¼šYAMLé…ç½®ç³»ç»Ÿ
- äººB+Cï¼š**äº¤äº’å¼æ—¶é—´è½´ä»ªè¡¨ç›˜**ï¼ˆæ–¹æ¡ˆBæ ¸å¿ƒï¼‰

### é˜¶æ®µä¸‰ï¼šæ•´åˆç­”è¾©ï¼ˆç¬¬3.5å‘¨ï¼‰

**å…¨å‘˜ä»»åŠ¡**ï¼š
- æ’°å†™30é¡µæŠ€æœ¯æŠ¥å‘Š
- åˆ¶ä½œç­”è¾©PPTï¼ˆ15åˆ†é’Ÿï¼‰
- å½•åˆ¶æ¼”ç¤ºè§†é¢‘ï¼ˆ5åˆ†é’Ÿï¼‰
- å‡†å¤‡Q&A

---

## äº”ã€è¯¦ç»†æ—¶é—´è¡¨

### Week 1ï¼ˆDec 3-9ï¼‰ï¼šç¯å¢ƒè¿ç§» + ä»£ç ç†è§£

| ä»»åŠ¡ | è´Ÿè´£äºº | äº§å‡º | ä¼˜å…ˆçº§ |
|------|--------|------|--------|
| **éªŒè¯environment.pyå¯è¿ç§»** | ç»„1-äººA | âœ… è¿ç§»æµ‹è¯•é€šè¿‡ | P0 |
| **ç¼–å†™GymåŒ…è£…å™¨** | ç»„1-äººA+B | âœ… BitcoinSelfishMiningEnv | P0 |
| **SB3è®­ç»ƒè„šæœ¬** | ç»„1-äººB | âœ… modern_trainer.py | P0 |
| è®­ç»ƒbaselineæ¨¡å‹ï¼ˆÎ±=0.35ï¼‰ | ç»„1 | âœ… baselineæ¨¡å‹ | P0 |
| ï¼ˆå¯é€‰ï¼‰é…ç½®DockeréªŒè¯ | ç»„1 | Dockeré•œåƒ | P2 |
| é˜…è¯» environment.py çŠ¶æ€ç©ºé—´ | ç»„2-äººA | ç†è§£æ–‡æ¡£ | P1 |
| é˜…è¯» environment.py çŠ¶æ€è½¬ç§» | ç»„2-äººB | ç†è§£æ–‡æ¡£ | P1 |
| é˜…è¯» environment.py å¥–åŠ±å‡½æ•° | ç»„2-äººC | ç†è§£æ–‡æ¡£ | P1 |
| **å­¦ä¹ Blockchain.com API** | **ç»„3-äººA** | **æ•°æ®é‡‡é›†è„šæœ¬v1** | P0 |
| **å¼€å§‹é‡‡é›†2023å¹´æ•°æ®** | **ç»„3-äººA** | **éƒ¨åˆ†å†å²æ•°æ®** | P0 |
| å­¦ä¹ æ—¶é—´åºåˆ—å¯è§†åŒ– | ç»„4-äººC | PlotlyåŸå‹ | P1 |
| æ­å»ºé¡¹ç›®æ¡†æ¶ | ç»„4-äººA | ç›®å½•ç»“æ„ | P1 |

**é‡Œç¨‹ç¢‘**ï¼š
- âœ… ç°ä»£ç¯å¢ƒå¯ç”¨ï¼ˆèƒ½è®­ç»ƒSB3æ¨¡å‹ï¼‰
- âœ… æ•°æ®é‡‡é›†å¯åŠ¨ï¼ˆä¸èƒ½æ‹–ï¼‰
- âœ… å…¨å‘˜ç†è§£environment.pyåŸç†

### Week 2ï¼ˆDec 10-16ï¼‰ï¼šæ‰©å±•å¼€å‘ + æ•°æ®é‡‡é›†åŠ é€Ÿ

| ä»»åŠ¡ | è´Ÿè´£äºº | äº§å‡º | ä¼˜å…ˆçº§ |
|------|--------|------|--------|
| è®­ç»ƒå¤šä¸ªÎ±çš„baseline | ç»„1 | Î±âˆˆ{0.30,0.35,0.40}æ¨¡å‹ | P0 |
| å®ç°åŠ¨æ€ç®—åŠ›ç¯å¢ƒ | ç»„2-äººA | DynamicAlphaEnv | P1 |
| å®ç°é˜²å¾¡åŒ…è£…å™¨ | ç»„2-äººB | DefenseWrapper | P1 |
| å¼€å§‹UTBé˜²å¾¡å®éªŒ | ç»„2-äººC | åˆæ­¥ç»“æœ | P1 |
| **å®Œæˆ2023å…¨å¹´æ•°æ®çˆ¬å–** | **ç»„3-äººA** | **å®Œæ•´æ•°æ®é›†ï¼ˆCSVï¼‰** | P0 |
| **æ•°æ®æ¸…æ´—å’ŒéªŒè¯** | **ç»„3-äººA** | **å¹²å‡€çš„æ•°æ®** | P0 |
| **å®ç°RealDataAlphaProcess** | **ç»„3-äººB** | **çœŸå®æ•°æ®ç¯å¢ƒ** | P0 |
| å®ç°åˆ†å‰æ ‘å¯è§†åŒ– | ç»„4-äººB | fork_tree.py | P1 |
| **æ—¶é—´è½´å¯è§†åŒ–åŸå‹** | **ç»„4-äººC** | **Plotlyæ—¶é—´è½´** | P0 |
| å‘½ä»¤è¡Œå·¥å…·æ¡†æ¶ | ç»„4-äººA | auditor.pyæ¡†æ¶ | P2 |

**é‡Œç¨‹ç¢‘**ï¼š
- âœ… æ‰©å±•åŠŸèƒ½åŸå‹å®Œæˆ
- âœ… **æ•°æ®é‡‡é›†å®Œæˆï¼ˆå…³é”®ï¼‰**
- âœ… çœŸå®æ•°æ®ç¯å¢ƒå¯ç”¨

### Week 3ï¼ˆDec 17-23ï¼‰ï¼šæ‰©å±•å®éªŒ + æ•´åˆ

| ä»»åŠ¡ | è´Ÿè´£äºº | äº§å‡º | ä¼˜å…ˆçº§ |
|------|--------|------|--------|
| å®Œæˆå‘¨æœŸæ€§ç®—åŠ›å®éªŒ | ç»„2-äººA | å®éªŒç»“æœ+åˆ†æ | P1 |
| å®Œæˆé˜²å¾¡å®éªŒï¼ˆUTB+DDAï¼‰ | ç»„2-äººB+C | å®éªŒç»“æœ+åˆ†æ | P1 |
| **æ‰¹é‡çœŸå®æ•°æ®æ¨¡æ‹Ÿ**ï¼ˆ**æ ¸å¿ƒ**ï¼‰ | **ç»„3-äººB** | **52å‘¨å›æµ‹ç»“æœ** | P0 |
| **åäº‹å®åˆ†æ** | **ç»„3-äººA+B** | **é«˜å±æ—¶åˆ»è¯†åˆ«** | P0 |
| **å®Œæˆäº¤äº’å¼æ—¶é—´è½´** | **ç»„4-äººB+C** | **å¨èƒåœ°å›¾HTML** | P0 |
| å®Œå–„å‘½ä»¤è¡Œå·¥å…· | ç»„4-äººA | auditor.pyå®Œæ•´ç‰ˆ | P2 |
| æ’°å†™æŠ€æœ¯æŠ¥å‘ŠPart 1ï¼ˆåŸç†ï¼‰ | ç»„1 | æŠ¥å‘Š10é¡µ | P1 |
| æ’°å†™æŠ€æœ¯æŠ¥å‘ŠPart 2ï¼ˆæ–¹æ¡ˆBï¼‰ | ç»„3 | **æŠ¥å‘Š10é¡µï¼ˆæ ¸å¿ƒï¼‰** | P0 |

**é‡Œç¨‹ç¢‘**ï¼š
- âœ… **æ–¹æ¡ˆBå®Œæ•´å®ç°ï¼ˆå…³é”®äº®ç‚¹ï¼‰**
- âœ… æ‰€æœ‰æ‰©å±•å®éªŒå®Œæˆ
- âœ… æŠ€æœ¯æŠ¥å‘Šåˆç¨¿å®Œæˆ

### Week 3.5ï¼ˆDec 24-26ï¼‰ï¼šæ–‡æ¡£ + ç­”è¾©å‡†å¤‡

| ä»»åŠ¡ | è´Ÿè´£äºº | äº§å‡º |
|------|--------|------|
| æ•´åˆæŠ€æœ¯æŠ¥å‘Šï¼ˆ30é¡µï¼‰ | å…¨å‘˜åˆ†å·¥ | å®Œæ•´æŠ¥å‘ŠPDF |
| åˆ¶ä½œç­”è¾©PPT | 2äºº | PPT 20é¡µ |
| å½•åˆ¶æ¼”ç¤ºè§†é¢‘ | 2äºº | è§†é¢‘ 5åˆ†é’Ÿ |
| æ•´åˆä»£ç +æ–‡æ¡£ | 2äºº | å®Œæ•´äº¤ä»˜åŒ… |
| ç­”è¾©å½©æ’ | å…¨å‘˜ | - |

---

## å…­ã€äº¤ä»˜ç‰©æ¸…å•

### 6.1 ä»£ç 
```
SquirRL-Auditor/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ environment/     # åŒºå—é“¾æ¨¡æ‹Ÿå™¨
â”‚   â”œâ”€â”€ agents/          # æ”»å‡»ç­–ç•¥
â”‚   â”œâ”€â”€ defenses/        # é˜²å¾¡æœºåˆ¶
â”‚   â”œâ”€â”€ data/            # ğŸ“ æ–°å¢ï¼šæ•°æ®æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ fetcher.py   #   æ•°æ®çˆ¬å–
â”‚   â”‚   â”œâ”€â”€ processor.py #   æ•°æ®é¢„å¤„ç†
â”‚   â”‚   â””â”€â”€ loader.py    #   æ•°æ®åŠ è½½
â”‚   â”œâ”€â”€ experiments/     # å®éªŒè„šæœ¬
â”‚   â”‚   â””â”€â”€ real_data_backtest.py  # çœŸå®æ•°æ®å›æµ‹
â”‚   â””â”€â”€ visualization/   # å¯è§†åŒ–
â”‚       â””â”€â”€ timeline.py  # æ—¶é—´è½´å¯è§†åŒ–
â”œâ”€â”€ data/                # ğŸ“ æ–°å¢ï¼šæ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ btc_2023_blocks.csv
â”‚   â”œâ”€â”€ btc_2023_pools.csv
â”‚   â””â”€â”€ processed/
â”œâ”€â”€ configs/             # YAMLé…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ real_data_config.yaml  # çœŸå®æ•°æ®é…ç½®
â”œâ”€â”€ auditor.py           # ä¸»ç¨‹åºå…¥å£
â””â”€â”€ requirements.txt
```

### 6.2 æ–‡æ¡£
- **æŠ€æœ¯æŠ¥å‘Š**ï¼ˆ30é¡µPDFï¼‰
  - èƒŒæ™¯ä¸åŠ¨æœº
  - è‡ªç§æŒ–çŸ¿åŸç†
  - å¤ç°å®éªŒç»“æœ
  - æ‰©å±•å®éªŒåˆ†æ
  - ç³»ç»Ÿè®¾è®¡è¯´æ˜
  - ç»“è®ºä¸å±•æœ›

### 6.3 æ¼”ç¤º
- **ç­”è¾©PPT**ï¼ˆ20é¡µï¼‰
- **æ¼”ç¤ºè§†é¢‘**ï¼ˆ5åˆ†é’Ÿï¼‰
- **Streamlit Web App**ï¼ˆå¯é€‰ï¼‰

---

## ä¸ƒã€å…³é”®æŠ€æœ¯å†³ç­–ï¼šä¸ºä»€ä¹ˆé€‰æ‹©éƒ¨åˆ†è¿ç§»ï¼Ÿ

### æ ¸å¿ƒé—®é¢˜ï¼šä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”

æˆ‘ä»¬è¯„ä¼°äº†ä¸‰ç§å®æ–½æ–¹æ¡ˆï¼Œæœ€ç»ˆé€‰æ‹©äº†**éƒ¨åˆ†è¿ç§»ç­–ç•¥**ã€‚

#### å®Œæ•´å¯¹æ¯”åˆ†æ

| ç»´åº¦ | æ–¹æ¡ˆAï¼šçº¯Docker | æ–¹æ¡ˆBï¼šéƒ¨åˆ†è¿ç§»ï¼ˆâœ…é€‰æ‹©ï¼‰| æ–¹æ¡ˆCï¼šå®Œå…¨é‡å†™ |
|------|---------------|---------------------|---------------|
| **å¼€å‘æ•ˆç‡** | â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| **è°ƒè¯•éš¾åº¦** | â­â­ | â­â­â­â­â­ | â­â­â­ |
| **é…ç½®å¤æ‚åº¦** | â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| **æˆåŠŸæ¦‚ç‡** | 90% | 95% | 20% |
| **å¼€å‘æ—¶é—´** | 1å‘¨é…ç½® | 3å¤©é…ç½® | 2-3å‘¨é‡å†™ |
| **æ‰©å±•éš¾åº¦** | â­â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| **ç»“æœå¯é æ€§** | â­â­â­â­â­ | â­â­â­â­ | â­â­ |
| **æ–¹æ¡ˆBæ”¯æŒ** | â­â­ | â­â­â­â­â­ | â­â­â­â­ |

### ä¸ºä»€ä¹ˆé€‰æ‹©æ–¹æ¡ˆBï¼ˆéƒ¨åˆ†è¿ç§»ï¼‰ï¼Ÿ

#### å…³é”®å‘ç°ï¼šenvironment.py ä¸ä¾èµ– TensorFlowï¼

```python
# éªŒè¯ç»“æœï¼šenvironment.py çš„å¯¼å…¥
import numpy as np
import scipy
import matplotlib.pyplot as plt
import mdptoolbox

# âŒ æ²¡æœ‰ import tensorflowï¼
# âœ… åªä¾èµ– numpy, scipyï¼ˆå‘åå…¼å®¹ï¼‰
```

**è¿™æ„å‘³ç€**ï¼š
- âœ… å¯ä»¥ç›´æ¥åœ¨ Python 3.9+ ç¯å¢ƒè¿è¡Œ
- âœ… ä¸éœ€è¦ Docker å°±èƒ½ä½¿ç”¨æ ¸å¿ƒç¯å¢ƒ
- âœ… åªæœ‰è®­ç»ƒè„šæœ¬ä¾èµ– TF 1.14ï¼Œå¯ç”¨ SB3 é‡å†™

#### ä¼˜åŠ¿1ï¼šå¼€å‘æ•ˆç‡æå‡10å€

**æ–¹æ¡ˆAï¼ˆçº¯Dockerï¼‰**ï¼š
```bash
# æ¯æ¬¡ä¿®æ”¹ä»£ç çš„æµç¨‹
1. åœ¨æœ¬åœ°ç¼–è¾‘ä»£ç 
2. é‡å¯Dockerå®¹å™¨
3. æŒ‚è½½ä»£ç åˆ°å®¹å™¨
4. åœ¨å®¹å™¨å†…è¿è¡Œæµ‹è¯•
5. æŸ¥çœ‹æ—¥å¿—ï¼ˆä¸æ–¹ä¾¿ï¼‰
â° æ¯æ¬¡è¿­ä»£ï¼š5-10åˆ†é’Ÿ
```

**æ–¹æ¡ˆBï¼ˆéƒ¨åˆ†è¿ç§»ï¼‰**ï¼š
```bash
# æ¯æ¬¡ä¿®æ”¹ä»£ç çš„æµç¨‹
1. åœ¨æœ¬åœ°ç¼–è¾‘ä»£ç 
2. python train.py
3. ç«‹å³çœ‹åˆ°ç»“æœ
4. VSCodeæ–­ç‚¹è°ƒè¯•
â° æ¯æ¬¡è¿­ä»£ï¼š30ç§’
```

#### ä¼˜åŠ¿2ï¼šä»£ç é‡å‡å°‘50å€

**åŸTF 1.14å®ç°**ï¼ˆ~500è¡Œï¼‰ï¼š
```python
class Qnetwork():
    def __init__(self, h_size, ...):
        self.vectorIn = tf.placeholder(shape=[None, input_size], dtype=tf.float32)
        self.fc1 = tf.layers.dense(inputs=self.vectorIn, units=h_size, ...)
        self.fc2 = tf.layers.dense(inputs=self.fc1, units=h_size, ...)
        self.Qout = tf.layers.dense(inputs=self.fc2, units=action_space, ...)
        # ... å¤§é‡æ‰‹å†™Double-DQNé€»è¾‘
        # ... ç»éªŒå›æ”¾Buffer
        # ... ç›®æ ‡ç½‘ç»œæ›´æ–°
        # ... çº¦500è¡Œä»£ç 
```

**SB3ç°ä»£å®ç°**ï¼ˆ~10è¡Œï¼‰ï¼š
```python
from stable_baselines3 import DQN

model = DQN("MlpPolicy", env, 
            learning_rate=1e-4,
            buffer_size=50000,
            target_update_interval=1000,
            verbose=1)
model.learn(total_timesteps=100000)
# âœ… åªéœ€10è¡Œï¼
```

#### ä¼˜åŠ¿3ï¼šæ–¹æ¡ˆBï¼ˆçœŸå®æ•°æ®ï¼‰æ›´å®¹æ˜“å®ç°

**æ•°æ®é‡‡é›†éœ€è¦ç°ä»£åº“**ï¼š
```python
import requests      # HTTPè¯·æ±‚ï¼ˆTF 1.14ç¯å¢ƒå¯èƒ½æœ‰å†²çªï¼‰
import pandas        # æ•°æ®å¤„ç†ï¼ˆæ–°ç‰ˆæœ¬ç‰¹æ€§ï¼‰
import plotly        # äº¤äº’å¼å¯è§†åŒ–ï¼ˆéœ€è¦æ–°ç‰ˆPythonï¼‰
```

- âŒ åœ¨ Dockerï¼ˆPython 3.6ï¼‰ä¸­é…ç½®è¿™äº›åº“ï¼šå›°éš¾
- âœ… åœ¨ Python 3.9+ ç¯å¢ƒï¼šä¸€è¡Œå‘½ä»¤æå®š

#### ä¼˜åŠ¿4ï¼šä»æœ‰éªŒè¯åŸºå‡†ï¼ˆä¿é™©ï¼‰

```
Week 1 Day 3ï¼ˆå¯é€‰ï¼‰ï¼š
1. é…ç½®Dockerç¯å¢ƒ
2. åœ¨Dockerä¸­è·‘1æ¬¡åŸä»£ç 
3. ä¿å­˜baselineç»“æœ
4. åç»­ä¸å†ä½¿ç”¨Docker

ä½œç”¨ï¼šéªŒè¯æˆ‘ä»¬è¿ç§»çš„ç¯å¢ƒè¡Œä¸ºæ˜¯å¦æ­£ç¡®
```

### æ–¹æ¡ˆCï¼ˆå®Œå…¨é‡å†™ï¼‰ä¸ºä»€ä¹ˆä¸å¯è¡Œï¼Ÿ

è™½ç„¶"å®Œå…¨ç°ä»£åŒ–"å¬èµ·æ¥å¾ˆå¥½ï¼Œä½†é£é™©å¤ªé«˜ï¼š

**1. æ—¶é—´é£é™©**
- é‡å†™ 2888è¡Œç¯å¢ƒï¼š2å‘¨
- è°ƒè¯•çŠ¶æ€è½¬ç§»é€»è¾‘ï¼š1å‘¨
- **æ€»å…±3å‘¨ï¼Œå‰©ä½™æ—¶é—´ä¸º0**

**2. éªŒè¯é£é™©**
- å¦‚æœç»“æœä¸è®ºæ–‡ä¸ç¬¦ï¼Œæ— æ³•åˆ¤æ–­æ˜¯bugè¿˜æ˜¯æ–°å‘ç°
- æ²¡æœ‰baselineå‚ç…§

**3. åˆ†å·¥é£é™©**
- 8ä¸ªäººä¸­å¯èƒ½åªæœ‰1-2äººèƒ½å†™æ ¸å¿ƒç¯å¢ƒ
- å…¶ä»–äººæ— äº‹å¯åš

### æˆ‘ä»¬çš„æ¶æ„ï¼ˆæ–¹æ¡ˆBï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç°ä»£å¼€å‘ç¯å¢ƒï¼ˆPython 3.9+ï¼‰                  â”‚  â† ä¸»è¦å·¥ä½œåŒº
â”‚  âœ… environment.pyï¼ˆç›´æ¥è¿ç§»ï¼‰                â”‚
â”‚  âœ… Stable-Baselines3ï¼ˆæ›¿ä»£TF 1.14ï¼‰         â”‚
â”‚  âœ¨ åŠ¨æ€ç®—åŠ›æ‰©å±•                              â”‚
â”‚  âœ¨ é˜²å¾¡æœºåˆ¶                                  â”‚
â”‚  âœ¨ çœŸå®æ•°æ®å›æµ‹ï¼ˆæ–¹æ¡ˆBï¼‰                     â”‚
â”‚  âœ¨ ç°ä»£å¯è§†åŒ–ï¼ˆPlotly, Streamlitï¼‰          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  DockeréªŒè¯ç¯å¢ƒï¼ˆå¯é€‰ï¼‰                       â”‚  â† ä»…ç”¨äºéªŒè¯
â”‚  âš ï¸ Week 1 é…ç½®ï¼Œè·‘1-2æ¬¡                     â”‚
â”‚  âš ï¸ éªŒè¯è¿ç§»æ­£ç¡®æ€§                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…«ã€åº”å¯¹è€å¸ˆè´¨ç–‘çš„è¯æœ¯

### Q1: ä¸ºä»€ä¹ˆä¸æ˜¯ä»é›¶å¼€å§‹å†™ï¼Ÿ

**å›ç­”**ï¼š
> "è€å¸ˆï¼Œæˆ‘ä»¬åšäº†æŠ€æœ¯è¯„ä¼°ï¼š
> 
> **å‘ç°å…³é”®äº‹å®**ï¼šåŸé¡¹ç›®çš„ environment.py ä¸ä¾èµ– TensorFlowï¼Œåªä¾èµ– numpy å’Œ scipyï¼Œè¿™æ„å‘³ç€å¯ä»¥ç›´æ¥è¿ç§»åˆ°ç°ä»£ç¯å¢ƒã€‚
> 
> **æˆ‘ä»¬çš„å·¥ä½œ**ï¼š
> - **è¿ç§»å±‚**ï¼šæå–ç¯å¢ƒåˆ° Python 3.9+ï¼ŒéªŒè¯è¡Œä¸ºä¸€è‡´æ€§
> - **é‡å†™å±‚**ï¼šç”¨ Stable-Baselines3 é‡å†™è®­ç»ƒé€»è¾‘ï¼ˆä»£ç é‡å‡å°‘50å€ï¼‰
> - **æ‰©å±•å±‚**ï¼šåŠ¨æ€ç®—åŠ›ã€çœŸå®æ•°æ®å›æµ‹ã€é˜²å¾¡æœºåˆ¶ï¼ˆåŸè®ºæ–‡éƒ½æ²¡æœ‰ï¼‰
> - **å·¥ç¨‹å±‚**ï¼šGymæ ‡å‡†åŒ–ã€é…ç½®åŒ–ã€å¯è§†åŒ–
> 
> è¿™ä¸æ˜¯'å·æ‡’'ï¼Œè€Œæ˜¯**å·¥ç¨‹åˆ¤æ–­åŠ›** â€”â€” è¯†åˆ«å“ªäº›å¯å¤ç”¨ï¼Œå“ªäº›éœ€åˆ›æ–°ã€‚"

### Q2: ä½ ä»¬ç†è§£ç¯å¢ƒä»£ç å—ï¼Ÿ

**å›ç­”**ï¼š
> "å®Œå…¨ç†è§£ã€‚è¯æ®æœ‰ä¸‰ï¼š
> 
> 1. **æ·±åº¦é˜…è¯»**ï¼šæˆ‘ä»¬è¯¦ç»†åˆ†æäº†2888è¡Œä»£ç ï¼Œæ–‡æ¡£ä¸­æœ‰å®Œæ•´çš„çŠ¶æ€ç©ºé—´ã€çŠ¶æ€è½¬ç§»ã€å¥–åŠ±å‡½æ•°çš„è§£æ
> 
> 2. **æˆåŠŸè¿ç§»**ï¼šæˆ‘ä»¬å°†ç¯å¢ƒä» Python 3.6 è¿ç§»åˆ° 3.9+ï¼Œå¹¶åŒ…è£…ä¸ºæ ‡å‡†Gymæ¥å£ï¼Œè¿™éœ€è¦å®Œå…¨ç†è§£æ¥å£è®¾è®¡
> 
> 3. **èƒ½å¤Ÿæ‰©å±•**ï¼šæˆ‘ä»¬åœ¨åŸç¯å¢ƒåŸºç¡€ä¸Šæ·»åŠ äº†åŠ¨æ€ç®—åŠ›ã€é˜²å¾¡æœºåˆ¶ï¼Œè¿™éœ€è¦æ·±å…¥ç†è§£å†…éƒ¨é€»è¾‘
> 
> å¦‚æœä¸ç†è§£ï¼Œæ˜¯åšä¸åˆ°è¿™ä¸‰ç‚¹çš„ã€‚"

### Q3: åˆ›æ–°æ€§åœ¨å“ªé‡Œï¼Ÿ

**å›ç­”**ï¼š
> "å››ä¸ªç»´åº¦çš„åˆ›æ–°ï¼š
> 
> 1. **éªŒè¯æ–¹å¼åˆ›æ–°**ï¼šåŸè®ºæ–‡åªåšç†è®ºæ¨¡æ‹Ÿï¼Œæˆ‘ä»¬ç”¨2023å¹´çœŸå®æ¯”ç‰¹å¸ç½‘ç»œæ•°æ®å›æµ‹ï¼ˆæ–¹æ¡ˆBï¼‰ï¼Œè¯†åˆ«å†å²ä¸Šçš„'æœ€è„†å¼±æ—¶åˆ»'
> 
> 2. **æ¨¡å‹åˆ›æ–°**ï¼šå‘¨æœŸæ€§+è·³è·ƒç®—åŠ›è¿‡ç¨‹ï¼ˆæ›´çœŸå®çš„ç½‘ç»œæ¨¡å‹ï¼‰
> 
> 3. **å®‰å…¨åˆ›æ–°**ï¼šé‡åŒ–UTBé˜²å¾¡æ•ˆæœï¼Œåˆ†æé˜²å¾¡-æ€§èƒ½çš„trade-off
> 
> 4. **å·¥å…·åˆ›æ–°**ï¼šç°ä»£åŒ–çš„å®¡è®¡å·¥å…·ï¼Œé…ç½®åŒ–+å¯è§†åŒ–ï¼Œå¯å¤ç”¨
> 
> æœ€æ ¸å¿ƒçš„æ˜¯**æ–¹æ¡ˆB**ï¼šä»ç†è®ºèµ°å‘å®è·µã€‚"

### Q4: ä¸ºä»€ä¹ˆä¸ç”¨Dockerï¼Ÿä¸ºä»€ä¹ˆä¸å®Œå…¨é‡å†™ï¼Ÿ

**å›ç­”**ï¼š
> "æˆ‘ä»¬è¯„ä¼°äº†ä¸‰ç§æ–¹æ¡ˆï¼š
> 
> **æ–¹æ¡ˆAï¼ˆçº¯Dockerï¼‰**ï¼š
> - ä¼˜ç‚¹ï¼šå®Œå…¨å¤ç°åŸç¯å¢ƒ
> - ç¼ºç‚¹ï¼šè°ƒè¯•æ•ˆç‡ä½,æ‰©å±•å›°éš¾,æ–¹æ¡ˆBéš¾å®ç°
> 
> **æ–¹æ¡ˆBï¼ˆéƒ¨åˆ†è¿ç§»ï¼‰âœ…æˆ‘ä»¬çš„é€‰æ‹©**ï¼š
> - å…³é”®å‘ç°ï¼šenvironment.pyä¸ä¾èµ–TensorFlow,åªä¾èµ–numpy
> - ç­–ç•¥ï¼šæå–ç¯å¢ƒåˆ°Python 3.9+,ç”¨SB3é‡å†™è®­ç»ƒ
> - Dockerä»…ç”¨äºéªŒè¯baseline(Week 1è·‘1æ¬¡)
> - ä¼˜ç‚¹ï¼šå¼€å‘æ•ˆç‡æå‡10å€,ä»£ç ç°ä»£åŒ–,æ–¹æ¡ˆBæ˜“å®ç°
> 
> **æ–¹æ¡ˆCï¼ˆå®Œå…¨é‡å†™ï¼‰**ï¼š
> - ç¼ºç‚¹ï¼šé‡å†™2888è¡Œç¯å¢ƒéœ€è¦2-3å‘¨,æ—¶é—´ä¸å¤Ÿ
> - é£é™©ï¼šç»“æœä¸è®ºæ–‡ä¸ç¬¦æ—¶æ— æ³•åˆ¤æ–­æ˜¯bugè¿˜æ˜¯æ–°å‘ç°
> 
> **æˆ‘ä»¬çš„åˆ¤æ–­**ï¼šæ–¹æ¡ˆBæ˜¯**å·¥ç¨‹æ™ºæ…§** â€”â€” è¯†åˆ«å“ªäº›å¯å¤ç”¨(ç¯å¢ƒé€»è¾‘),å“ªäº›éœ€ç°ä»£åŒ–(è®­ç»ƒæ¡†æ¶),å“ªäº›éœ€éªŒè¯(Docker baseline)ã€‚è¿™ä¸æ˜¯é¿é‡å°±è½»,è€Œæ˜¯åœ¨æ—¶é—´çº¦æŸä¸‹çš„æœ€ä¼˜è§£ã€‚"

---

## ä¹ã€DockeréªŒè¯é…ç½®ï¼ˆå¯é€‰ï¼‰

**âš ï¸ æ³¨æ„**ï¼šåœ¨"éƒ¨åˆ†è¿ç§»"ç­–ç•¥ä¸‹,Dockerä»…ç”¨äºWeek 1çš„baselineéªŒè¯,ä¸æ˜¯ä¸»è¦å¼€å‘ç¯å¢ƒã€‚

### éªŒè¯ç”¨ Dockerfileï¼ˆå¯é€‰é…ç½®ï¼‰

```dockerfile
# Dockerfile for SquirRL Legacy Environment
FROM tensorflow/tensorflow:1.14.0-gpu-py3

LABEL maintainer="your-team@university.edu"
LABEL description="SquirRL Legacy Environment with TensorFlow 1.14"

WORKDIR /workspace

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    git \
    vim \
    && rm -rf /var/lib/apt/lists/*

# å®‰è£…Pythonä¾èµ–
RUN pip install --no-cache-dir \
    gym==0.14.0 \
    matplotlib==3.1.0 \
    scipy==1.3.0 \
    pymdptoolbox==4.0b3 \
    numpy==1.16.4 \
    pandas==0.25.0

# å¤åˆ¶ä»£ç 
COPY SquirRL-repo/SingleAgent /workspace/SingleAgent
COPY SquirRL-repo/requirements.txt /workspace/

# åˆ›å»ºç»“æœç›®å½•
RUN mkdir -p /workspace/results

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV PYTHONUNBUFFERED=1

# é»˜è®¤å‘½ä»¤
CMD ["/bin/bash"]
```

### ä½¿ç”¨æ–¹å¼ï¼ˆä»…ç”¨äºéªŒè¯baselineï¼‰

**ç›®çš„**ï¼šéªŒè¯æˆ‘ä»¬è¿ç§»çš„ç¯å¢ƒè¡Œä¸ºæ˜¯å¦ä¸åŸè®ºæ–‡ä¸€è‡´

**Step 1ï¼šæ„å»ºé•œåƒ**ï¼ˆWeek 1 Day 3ï¼Œå¯é€‰ï¼‰
```bash
# build_docker.sh
#!/bin/bash

echo "Building SquirRL Docker image for baseline verification..."
docker build -t squirrl-legacy:v1.0 .

echo "Testing image..."
docker run --rm squirrl-legacy:v1.0 python -c "import tensorflow as tf; print(f'TensorFlow version: {tf.__version__}')"

echo "Done!"
```

**Step 2ï¼šè¿è¡ŒbaselineéªŒè¯**ï¼ˆè·‘1-2æ¬¡å³å¯ï¼‰
```bash
# verify_baseline.sh
#!/bin/bash

echo "Running baseline verification (alpha=0.35)..."
docker run --rm \
  -v ${PWD}/legacy_docker/baseline_results:/workspace/results \
  squirrl-legacy:v1.0 \
  python SingleAgent/btc.py \
    --alpha 0.35 \
    --episodes 10 \
    --output results/

echo "Baseline results saved to legacy_docker/baseline_results/"
echo "Compare with our modern implementation results"
```

**âš ï¸ å…³é”®æç¤º**ï¼š
- Dockerç¯å¢ƒé…ç½®å,åªéœ€è·‘1-2æ¬¡éªŒè¯å®éªŒ
- ä¿å­˜ç»“æœä½œä¸ºå‚ç…§baseline
- åç»­æ‰€æœ‰å¼€å‘åœ¨Python 3.9+ç¯å¢ƒè¿›è¡Œ
- å¦‚æœé‡åˆ°Dockeré…ç½®é—®é¢˜,å¯ä»¥ç›´æ¥è·³è¿‡(ä¸å½±å“ä¸»è¦å·¥ä½œ)

---

## åã€é£é™©æ§åˆ¶ä¸åº”å¯¹

### é£é™©1ï¼šç¯å¢ƒè¿ç§»å¤±è´¥ âš ï¸âš ï¸ï¼ˆå·²é™ä½ï¼‰
**æ¦‚ç‡**ï¼šä½ï¼ˆå·²éªŒè¯environment.pyä¸ä¾èµ–TFï¼‰  
**å½±å“**ï¼šä¸­ç­‰ï¼ˆå¯å›é€€åˆ°Dockerï¼‰

**åº”å¯¹ç­–ç•¥**ï¼š
- âœ… Week 1 Day 1ç«‹å³éªŒè¯è¿ç§»å¯è¡Œæ€§ï¼ˆ30åˆ†é’Ÿæµ‹è¯•ï¼‰
- âœ… å¦‚æœè¿ç§»å¤±è´¥,å›é€€åˆ°çº¯Dockeræ–¹æ¡ˆ
- âœ… SB3è®­ç»ƒå¤±è´¥,å¯ä»¥ä½¿ç”¨åŸTF 1.14ä»£ç 

**ä¿åº•æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨Dockerä½œä¸ºä¸»è¦ç¯å¢ƒï¼ˆè™½ç„¶æ•ˆç‡ä½,ä½†å¯è¡Œï¼‰
- æˆ–ä½¿ç”¨äº‘å¹³å°ï¼ˆGoogle Colab, Kaggleï¼‰

### é£é™©2ï¼šè®­ç»ƒæ—¶é—´è¿‡é•¿ âš ï¸ï¼ˆå·²é™ä½ï¼‰
**æ¦‚ç‡**ï¼šä¸­  
**å½±å“**ï¼šä¸­ç­‰ï¼ˆå½±å“æ‰©å±•å®éªŒæ•°é‡ï¼‰

**åº”å¯¹ç­–ç•¥ï¼ˆéƒ¨åˆ†è¿ç§»åä¼˜åŠ¿ï¼‰**ï¼š
- âœ… SB3è®­ç»ƒé€Ÿåº¦æ¯”TF 1.14å¿«ï¼ˆä¼˜åŒ–æ›´å¥½ï¼‰
- âœ… æœ¬åœ°ç¯å¢ƒå¯ä»¥å¹¶è¡Œè®­ç»ƒå¤šä¸ªæ¨¡å‹
- âœ… å‡å°‘è®­ç»ƒstepsï¼šæ ¹æ®æ”¶æ•›æƒ…å†µè°ƒæ•´
- âœ… å…ˆè®­ç»ƒå…³é”®Î±å€¼ï¼ˆ0.35, 0.40ï¼‰,å…¶ä»–å¯é€‰

**ä¿åº•æ–¹æ¡ˆ**ï¼šåªå®Œæˆbaseline + æ–¹æ¡ˆBæ ¸å¿ƒå®éªŒ

### é£é™©3ï¼šæ‰©å±•å®éªŒç»“æœä¸ç†æƒ³ âš ï¸
**æ¦‚ç‡**ï¼šä¸­  
**å½±å“**ï¼šä¸­ç­‰ï¼ˆå½±å“åˆ›æ–°æ€§å¾—åˆ†ï¼‰

**åº”å¯¹ç­–ç•¥**ï¼š
- âœ… å³ä½¿ç»“æœ"ä¸å¥½"ä¹Ÿæ˜¯å‘ç°ï¼ˆè´Ÿé¢ç»“æœä¹Ÿæœ‰ä»·å€¼ï¼‰
- âœ… åœ¨æŠ¥å‘Šä¸­è¯šå®åˆ†æåŸå› 
- âœ… è‡³å°‘æœ‰å¤ç°å®éªŒï¼ˆä¿åº•80åˆ†ï¼‰

**ä¿åº•æ–¹æ¡ˆ**ï¼šé‡ç‚¹è®²å¤ç°éƒ¨åˆ†çš„ç†è§£æ·±åº¦

### é£é™©4ï¼šå°ç»„æˆå‘˜èƒ½åŠ›ä¸å‡ âš ï¸
**æ¦‚ç‡**ï¼šé«˜  
**å½±å“**ï¼šä¸­ç­‰ï¼ˆå½±å“è¿›åº¦ï¼‰

**åº”å¯¹ç­–ç•¥**ï¼š
- âœ… Week 1è¯†åˆ«æŠ€èƒ½ï¼ˆè°ä¼šPython/Docker/æ•°å­¦ï¼‰
- âœ… å¼ºå¼±æ­é…åˆ†ç»„
- âœ… è®¾ç½®æ¯æ—¥ç«™ä¼šï¼ˆ5åˆ†é’ŸåŒæ­¥è¿›åº¦ï¼‰
- âœ… å»ºç«‹ä»£ç äº’å®¡æœºåˆ¶

**ä¿åº•æ–¹æ¡ˆ**ï¼š2ä¸ªæŠ€æœ¯å¼ºçš„äººåšæ ¸å¿ƒï¼Œå…¶ä»–äººåšæ–‡æ¡£å’Œå¯è§†åŒ–

### é£é™©5ï¼šæ—¶é—´ä¸å¤Ÿï¼ˆæœ€å¯èƒ½ï¼‰ âš ï¸âš ï¸âš ï¸
**æ¦‚ç‡**ï¼šæé«˜  
**å½±å“**ï¼šé«˜

**åº”å¯¹ç­–ç•¥ï¼ˆæ•´åˆæ–¹æ¡ˆBåï¼‰**ï¼š
- âœ… **ä¼˜å…ˆçº§æ’åº**ï¼š
  1. å¤ç°å®éªŒï¼ˆå¿…é¡»å®Œæˆï¼‰
  2. **æ–¹æ¡ˆBåŸºç¡€ç‰ˆ**ï¼ˆçœŸå®æ•°æ®å›æµ‹ï¼Œæ ¸å¿ƒäº®ç‚¹ï¼‰
  3. å¯è§†åŒ–ï¼ˆæ—¶é—´è½´å±•ç¤ºï¼‰
  4. å…¶ä»–æ‰©å±•ï¼ˆå‘¨æœŸæ€§ç®—åŠ›ï¼Œå¯é€‰ï¼‰
  5. å·¥å…·åŒ–ï¼ˆé”¦ä¸Šæ·»èŠ±ï¼‰

**ä¿åº•æ–¹æ¡ˆ**ï¼š
```
æœ€ä½äº¤ä»˜æ ‡å‡†ï¼ˆä¿82åˆ†ï¼‰ï¼š
âœ… Dockerå¤ç°Figure 3
âœ… æ–¹æ¡ˆBåŸºç¡€ç‰ˆï¼ˆè‡³å°‘3ä¸ªå…³é”®æ—¥æœŸçš„å›æµ‹ï¼‰
âœ… åŸºç¡€å¯è§†åŒ–ï¼ˆæ—¶é—´è½´é™æ€å›¾ï¼‰
âœ… 25é¡µæŠ€æœ¯æŠ¥å‘Šï¼ˆå«çœŸå®æ•°æ®ç« èŠ‚ï¼‰
âœ… èƒ½æ¼”ç¤ºçš„PPT
```

### é£é™©6ï¼šæ–¹æ¡ˆBæ•°æ®é‡‡é›†å¤±è´¥ âš ï¸âš ï¸ï¼ˆæ–°å¢ï¼‰
**æ¦‚ç‡**ï¼šä¸­  
**å½±å“**ï¼šä¸­ç­‰ï¼ˆå½±å“åˆ›æ–°æ€§ï¼‰

**å¯èƒ½åŸå› **ï¼š
- APIé™æµï¼ˆæ¯å¤©è¯·æ±‚æ¬¡æ•°é™åˆ¶ï¼‰
- æ•°æ®ä¸å®Œæ•´ï¼ˆæŸäº›æ—¥æœŸç¼ºå¤±ï¼‰
- ç½‘ç»œé—®é¢˜

**åº”å¯¹ç­–ç•¥**ï¼š
- âœ… **Week 1å°±å¼€å§‹é‡‡é›†**ï¼ˆé¢„ç•™æ—¶é—´ï¼‰
- âœ… ä½¿ç”¨å¤šä¸ªæ•°æ®æºå¤‡ä»½
- âœ… å‡†å¤‡æ›¿ä»£æ•°æ®é›†ï¼ˆå¦‚æœå®åœ¨é‡‡é›†ä¸åˆ°ï¼Œä½¿ç”¨å·²æœ‰çš„å…¬å¼€æ•°æ®é›†ï¼‰

**ä¿åº•æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨å·²å‘è¡¨è®ºæ–‡çš„æ•°æ®é›†
- æˆ–è€…åªåˆ†æ2023å¹´Q1ï¼ˆ3ä¸ªæœˆï¼‰ï¼Œé™ä½æ•°æ®é‡

---

## åä¸€ã€æˆåŠŸæ ‡å‡†ä¸åˆ†æ•°é¢„æœŸ

### æœ€ä½æ ‡å‡†ï¼ˆä¿åº•82åˆ†ï¼‰âœ…
**äº¤ä»˜ç‰©**ï¼š
- âœ… Dockerç¯å¢ƒ + Dockerfile
- âœ… å¤ç° Bitcoin Figure 3ï¼ˆÎ±=0.35çš„å…³é”®ç‚¹ï¼‰
- âœ… 1ä¸ªæ‰©å±•å®éªŒï¼ˆå‘¨æœŸæ€§ç®—åŠ›æ³¢åŠ¨ï¼‰
- âœ… åŸºç¡€å¯è§†åŒ–ï¼ˆMatplotlibæ›²çº¿å›¾ï¼‰
- âœ… 20é¡µæŠ€æœ¯æŠ¥å‘Š
- âœ… ç­”è¾©PPT + èƒ½è·‘çš„æ¼”ç¤º

**è¯´æœåŠ›**ï¼š
> "æˆ‘ä»¬ç”¨Dockeréš”ç¦»äº†è€ç¯å¢ƒï¼Œå¤ç°äº†è®ºæ–‡æ ¸å¿ƒç»“æœï¼Œè¯æ˜äº†ç†è§£ã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬æ‰©å±•äº†åŠ¨æ€ç®—åŠ›åœºæ™¯ï¼Œå‘ç°äº†Xç°è±¡ã€‚"

### è‰¯å¥½æ ‡å‡†ï¼ˆå†²åˆº86-90åˆ†ï¼‰âœ…âœ… - **åŠ å…¥æ–¹æ¡ˆBå**
**äº¤ä»˜ç‰©**ï¼š
- âœ… æœ€ä½æ ‡å‡†çš„å…¨éƒ¨å†…å®¹
- âœ… **çœŸå®æ•°æ®å›æµ‹å®éªŒ**ï¼ˆæ–¹æ¡ˆBï¼‰**æ ¸å¿ƒäº®ç‚¹**
  - 2023å¹´æ¯”ç‰¹å¸ç½‘ç»œå†å²æ•°æ®
  - çœŸå®ç®—åŠ›åˆ†å¸ƒé‡æ”¾
  - "æœ€è„†å¼±æ—¶åˆ»"è¯†åˆ«
- âœ… 1-2ä¸ªå…¶ä»–æ‰©å±•ï¼ˆåŠ¨æ€ç®—åŠ›æˆ–UTBé˜²å¾¡ï¼‰
- âœ… å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¯é…ç½®è¿è¡Œï¼‰
- âœ… **æ—¶é—´è½´å¯è§†åŒ–**ï¼ˆçœŸå®æ•°æ®å±•ç¤ºï¼‰
- âœ… 25-30é¡µæŠ€æœ¯æŠ¥å‘Šï¼ˆå«çœŸå®å¨èƒåˆ†æï¼‰

**è¯´æœåŠ›**ï¼š
> "æˆ‘ä»¬ä¸ä»…å¤ç°äº†ç†è®ºæ”»å‡»ï¼Œè¿˜ç”¨2023å¹´çœŸå®çš„æ¯”ç‰¹å¸ç½‘ç»œæ•°æ®è¿›è¡Œäº†å›æµ‹ã€‚æˆ‘ä»¬å‘ç°ï¼šåœ¨XæœˆYæ—¥ï¼Œå¦‚æœFoundryUSAçŸ¿æ± ï¼ˆå½“æ—¶å 30%ç®—åŠ›ï¼‰å‘åŠ¨æ”»å‡»ï¼Œå¯ä»¥è·å¾—Z%çš„é¢å¤–æ”¶ç›Šã€‚è¿™è¯æ˜äº†å¨èƒæ˜¯çœŸå®å­˜åœ¨çš„ï¼Œä¸æ˜¯çº¸ä¸Šè°ˆå…µã€‚"

### ä¼˜ç§€æ ‡å‡†ï¼ˆå†²åˆº91-95åˆ†ï¼‰âœ…âœ…âœ… - **æ–¹æ¡ˆBå®Œæ•´ç‰ˆ**
**äº¤ä»˜ç‰©**ï¼š
- âœ… è‰¯å¥½æ ‡å‡†çš„å…¨éƒ¨å†…å®¹
- âœ… **å®Œæ•´çš„çœŸå®æ•°æ®åˆ†æ**ï¼š
  - å…¨å¹´12ä¸ªæœˆçš„å¨èƒè¯„ä¼°
  - å¤šä¸ªçŸ¿æ± çš„å¯¹æ¯”åˆ†æ
  - ç®—åŠ›æ³¢åŠ¨ vs æ”»å‡»æˆåŠŸç‡çš„å…³è”åˆ†æ
- âœ… **äº¤äº’å¼æ—¶é—´è½´å¯è§†åŒ–**ï¼ˆWebç•Œé¢ï¼‰
  - å¯æ‹–åŠ¨çš„æ—¶é—´è½´
  - ç‚¹å‡»æŸ¥çœ‹å…·ä½“æ—¶åˆ»çš„æ”»å‡»æ¨¡æ‹Ÿ
  - ç®—åŠ›åˆ†å¸ƒåŠ¨æ€å›¾
- âœ… 2-3ä¸ªæ‰©å±•å®éªŒï¼ˆçœŸå®æ•°æ® + é˜²å¾¡ + å‘¨æœŸæ€§ç®—åŠ›ï¼‰
- âœ… 30-35é¡µæŠ€æœ¯æŠ¥å‘Šï¼ˆå«çœŸå®æ¡ˆä¾‹åˆ†æï¼‰
- âœ… **çœŸå®å¨èƒé¢„è­¦ç³»ç»Ÿ**ï¼ˆåŠ åˆ†é¡¹ï¼‰

**è¯´æœåŠ›**ï¼š
> "æˆ‘ä»¬æ„å»ºäº†åŸºäºçœŸå®æ•°æ®çš„åŒºå—é“¾å®‰å…¨å®¡è®¡ç³»ç»Ÿã€‚é€šè¿‡åˆ†æ2023å¹´å…¨å¹´çš„æ¯”ç‰¹å¸ç½‘ç»œæ•°æ®ï¼Œæˆ‘ä»¬è¯†åˆ«å‡ºäº†Xä¸ª'é«˜å±æ—¶åˆ»'ï¼Œå¹¶é‡åŒ–äº†çœŸå®å¨èƒã€‚æˆ‘ä»¬å‘ç°ï¼š
> 1. å½“ç®—åŠ›é›†ä¸­åº¦è¶…è¿‡Y%æ—¶ï¼Œæ”»å‡»æˆåŠŸç‡æå‡Zå€
> 2. ç½‘ç»œæ‹¥å µæœŸé—´ï¼ˆå­¤å—ç‡>5%ï¼‰ï¼Œé˜²å¾¡æœºåˆ¶å¤±æ•ˆ
> 3. çœŸå®æ”»å‡»çš„æ”¶ç›Šæ¯”ç†è®ºæ¨¡æ‹Ÿä½W%ï¼ˆåŸå› æ˜¯...ï¼‰
> 
> æˆ‘ä»¬çš„å·¥å…·ä¸ä»…èƒ½è¯„ä¼°å†å²ï¼Œè¿˜èƒ½é¢„è­¦æœªæ¥é£é™©ã€‚"

### ğŸ¯ ç°å®ç›®æ ‡å»ºè®®ï¼ˆæ•´åˆæ–¹æ¡ˆBåï¼‰

æ ¹æ®3.5å‘¨çš„æ—¶é—´çº¦æŸï¼Œå»ºè®®ç›®æ ‡ï¼š
- **Week 1ç»“æŸ**ï¼šè¾¾åˆ°"èƒ½è·‘é€šDocker" + æ•°æ®é‡‡é›†å¯åŠ¨
- **Week 2ç»“æŸ**ï¼šè¾¾åˆ°"æœ€ä½æ ‡å‡†" + çœŸå®æ•°æ®æ¸…æ´—å®Œæˆ
- **Week 3ç»“æŸ**ï¼šè¾¾åˆ°"è‰¯å¥½æ ‡å‡†"ï¼ˆ**æ–¹æ¡ˆBåŸºç¡€ç‰ˆå®Œæˆ**ï¼‰
- **Week 3.5**ï¼šå†²åˆº"ä¼˜ç§€æ ‡å‡†"ï¼ˆæ–¹æ¡ˆBå®Œæ•´ç‰ˆ + äº¤äº’å¼å¯è§†åŒ–ï¼‰

**æ ¸å¿ƒåŸåˆ™**ï¼š
1. å…ˆä¿è¯å¤ç°ï¼ˆ82åˆ†æ‰˜åº•ï¼‰
2. **ä¼˜å…ˆå®Œæˆæ–¹æ¡ˆBåŸºç¡€ç‰ˆ**ï¼ˆå…³é”®çªç ´ç‚¹ï¼Œ+5-8åˆ†ï¼‰
3. æœ‰ä½™åŠ›å†åŠ å…¶ä»–æ‰©å±•

---

## åäºŒã€æ€»ç»“

### æ ¸å¿ƒç†å¿µ
**"å®Œæˆ > å®Œç¾"**

ä¸€ä¸ªèƒ½è·‘é€šã€è®²æ¸…æ¥šçš„é¡¹ç›®ï¼Œè¿œå¥½äºåšåˆ°ä¸€åŠçš„å®ä¼Ÿè®¡åˆ’ã€‚

### é¡¹ç›®äº®ç‚¹
1. **æœ‰ç†è®ºæ”¯æ’‘**ï¼ˆé¡¶ä¼šè®ºæ–‡ï¼‰
2. **æœ‰æŠ€æœ¯æ·±åº¦**ï¼ˆå…±è¯†åè®®ã€å¼ºåŒ–å­¦ä¹ ï¼‰
3. **æœ‰å®ç”¨ä»·å€¼**ï¼ˆå®‰å…¨å®¡è®¡å·¥å…·ï¼‰
4. **æœ‰å®Œæ•´äº¤ä»˜**ï¼ˆä»£ç +æ–‡æ¡£+æ¼”ç¤ºï¼‰

### é¢„æœŸæˆæœ
- æ·±å…¥ç†è§£åŒºå—é“¾å®‰å…¨é—®é¢˜
- æŒæ¡å¼ºåŒ–å­¦ä¹ åœ¨åšå¼ˆåœºæ™¯ä¸­çš„åº”ç”¨
- å®Œæˆä¸€ä¸ªå¯æ¼”ç¤ºçš„å·¥å…·åŸå‹
- äº§å‡ºä¸€ä»½é«˜è´¨é‡æŠ€æœ¯æŠ¥å‘Š

---

**é¡¹ç›®æˆåŠŸçš„å…³é”®**ï¼šåˆç†çš„èŒƒå›´æ§åˆ¶ + æ‰å®çš„æ‰§è¡Œ + æœ‰æ•ˆçš„å±•ç¤º

---

## é™„å½•Aï¼šæ–¹æ¡ˆBå®æ–½è¯¦ç»†æŒ‡å—

### æ–¹æ¡ˆBï¼šçœŸå®åŒºå—é“¾æ•°æ®å›æµ‹çš„å®Œæ•´æµç¨‹

#### ç¬¬ä¸€æ­¥ï¼šæ•°æ®é‡‡é›†ï¼ˆWeek 1-2ï¼Œ1äººï¼‰

**ç›®æ ‡**ï¼šè·å–2023å¹´æ¯”ç‰¹å¸ç½‘ç»œçš„å†å²æ•°æ®

**æ•°æ®æº1ï¼šBlockchain.com API**
```python
import requests
import pandas as pd
from datetime import datetime, timedelta

def fetch_blocks_data(start_date, end_date):
    """
    è·å–åŒºå—åŸºæœ¬ä¿¡æ¯
    è¿”å›ï¼šåŒºå—é«˜åº¦ã€æ—¶é—´æˆ³ã€çŸ¿æ± 
    """
    base_url = "https://blockchain.info"
    
    blocks = []
    current_date = start_date
    
    while current_date <= end_date:
        # è·å–å½“å¤©çš„åŒºå—
        timestamp = int(current_date.timestamp() * 1000)
        response = requests.get(
            f"{base_url}/blocks/{timestamp}?format=json"
        )
        
        if response.status_code == 200:
            day_blocks = response.json()
            blocks.extend(day_blocks)
            print(f"Fetched {len(day_blocks)} blocks for {current_date}")
        
        current_date += timedelta(days=1)
        time.sleep(1)  # é¿å…APIé™æµ
    
    return pd.DataFrame(blocks)

# ä½¿ç”¨ç¤ºä¾‹
start = datetime(2023, 1, 1)
end = datetime(2023, 12, 31)
blocks_df = fetch_blocks_data(start, end)
blocks_df.to_csv('data/btc_2023_blocks.csv', index=False)
```

**æ•°æ®æº2ï¼šBTC.com APIï¼ˆçŸ¿æ± ç®—åŠ›ï¼‰**
```python
def fetch_pool_distribution(date):
    """
    è·å–æŒ‡å®šæ—¥æœŸçš„çŸ¿æ± ç®—åŠ›åˆ†å¸ƒ
    è¿”å›ï¼šçŸ¿æ± åç§°ã€ç®—åŠ›å æ¯”
    """
    url = f"https://btc.com/api/v3/pool/hashrate-history"
    params = {
        'date': date.strftime('%Y%m%d'),
        'dimension': '1d'
    }
    
    response = requests.get(url, params=params)
    data = response.json()
    
    pools = []
    for pool in data['data']:
        pools.append({
            'date': date,
            'pool_name': pool['name'],
            'hashrate_pct': pool['shares_pct'],
            'blocks_found': pool['blocks_count']
        })
    
    return pd.DataFrame(pools)

# æ‰¹é‡è·å–å…¨å¹´æ•°æ®
all_pools = []
for month in range(1, 13):
    for day in range(1, 32):
        try:
            date = datetime(2023, month, day)
            pools_df = fetch_pool_distribution(date)
            all_pools.append(pools_df)
        except:
            continue

pools_data = pd.concat(all_pools)
pools_data.to_csv('data/btc_2023_pools.csv', index=False)
```

**æ•°æ®æ¸…æ´—**ï¼š
```python
def clean_and_validate_data(blocks_df, pools_df):
    """æ•°æ®æ¸…æ´—å’ŒéªŒè¯"""
    
    # 1. åˆ é™¤é‡å¤
    blocks_df = blocks_df.drop_duplicates(subset=['height'])
    
    # 2. å¡«å……ç¼ºå¤±çš„çŸ¿æ± ä¿¡æ¯
    blocks_df['pool'] = blocks_df['pool'].fillna('Unknown')
    
    # 3. è®¡ç®—æ¯æ—¥ç»Ÿè®¡
    daily_stats = blocks_df.groupby('date').agg({
        'height': 'count',  # æ¯æ—¥åŒºå—æ•°
        'pool': lambda x: x.value_counts().to_dict()  # çŸ¿æ± åˆ†å¸ƒ
    }).reset_index()
    
    # 4. éªŒè¯æ•°æ®å®Œæ•´æ€§
    expected_blocks_per_day = 144  # æ¯”ç‰¹å¸å¹³å‡10åˆ†é’Ÿä¸€ä¸ªå—
    incomplete_days = daily_stats[
        daily_stats['height'] < expected_blocks_per_day * 0.9
    ]
    
    if len(incomplete_days) > 0:
        print(f"Warning: {len(incomplete_days)} days have incomplete data")
    
    return blocks_df, daily_stats
```

#### ç¬¬äºŒæ­¥ï¼šé›†æˆåˆ°æ¨¡æ‹Ÿç¯å¢ƒï¼ˆWeek 2-3ï¼Œ1äººï¼‰

**å®ç° RealDataAlphaProcess ç±»**ï¼š
```python
class RealDataAlphaProcess:
    """åŸºäºçœŸå®æ•°æ®çš„ç®—åŠ›è¿‡ç¨‹"""
    
    def __init__(self, pools_data, target_pool='FoundryUSA'):
        """
        pools_data: DataFrameï¼ŒåŒ…å«å†å²ç®—åŠ›åˆ†å¸ƒ
        target_pool: ç›®æ ‡çŸ¿æ± ï¼ˆå‡è®¾ä¸ºæ”»å‡»è€…ï¼‰
        """
        self.data = pools_data
        self.target_pool = target_pool
        self.current_index = 0
        
        # é¢„å¤„ç†ï¼šè®¡ç®—ç›®æ ‡çŸ¿æ± çš„å†å²ç®—åŠ›
        self.alpha_history = self._extract_alpha_history()
    
    def _extract_alpha_history(self):
        """æå–ç›®æ ‡çŸ¿æ± çš„å†å²ç®—åŠ›å æ¯”"""
        target_data = self.data[
            self.data['pool_name'] == self.target_pool
        ]
        return target_data.set_index('date')['hashrate_pct']
    
    def reset(self):
        """é‡ç½®åˆ°å†å²å¼€å§‹"""
        self.current_index = 0
        return self.get_alpha()
    
    def get_alpha(self):
        """è·å–å½“å‰æ—¶åˆ»çš„Î±"""
        if self.current_index >= len(self.alpha_history):
            self.current_index = 0
        
        alpha = self.alpha_history.iloc[self.current_index]
        return alpha / 100.0  # è½¬æ¢ä¸º0-1ä¹‹é—´
    
    def next(self):
        """å‰è¿›åˆ°ä¸‹ä¸€ä¸ªæ—¶é—´æ­¥"""
        self.current_index += 1
        return self.get_alpha()
```

**é›†æˆåˆ°ç¯å¢ƒ**ï¼š
```python
from environment import SM_env_with_stale

def create_real_data_env(pools_data, target_pool):
    """åˆ›å»ºåŸºäºçœŸå®æ•°æ®çš„ç¯å¢ƒ"""
    
    # åˆ›å»ºalphaè¿‡ç¨‹
    alpha_process = RealDataAlphaProcess(pools_data, target_pool)
    
    # åˆ›å»ºç¯å¢ƒï¼ˆéœ€è¦ä¿®æ”¹environment.pyä»¥æ”¯æŒè‡ªå®šä¹‰alpha_processï¼‰
    env = SM_env_with_stale(
        max_hidden_block=20,
        attacker_fraction=alpha_process.get_alpha(),  # åˆå§‹å€¼
        follower_fraction=0.5,
        rule="longest",
        stale_rate=0.0,
        dev=0.0,
        know_alpha=True,
        random_process="real",  # æ–°å¢æ¨¡å¼
        alpha_process_obj=alpha_process  # ä¼ å…¥å¯¹è±¡
    )
    
    return env
```

#### ç¬¬ä¸‰æ­¥ï¼šæ‰¹é‡æ¨¡æ‹Ÿå®éªŒï¼ˆWeek 3ï¼Œ2äººï¼‰

**åäº‹å®åˆ†æ**ï¼š
```python
def counterfactual_attack_simulation(
    pools_data, 
    target_pool, 
    attack_date,
    num_episodes=100
):
    """
    åäº‹å®æ¨¡æ‹Ÿï¼šå¦‚æœåœ¨æŸä¸ªå†å²æ—¶åˆ»å‘åŠ¨æ”»å‡»
    
    è¿”å›ï¼šæ”»å‡»æˆåŠŸç‡ã€å¹³å‡æ”¶ç›Šã€ç›¸å¯¹æ”¶ç›Š
    """
    
    # è·å–è¯¥æ—¥æœŸçš„çœŸå®ç®—åŠ›
    date_data = pools_data[pools_data['date'] == attack_date]
    alpha = date_data[
        date_data['pool_name'] == target_pool
    ]['hashrate_pct'].values[0] / 100.0
    
    # åˆ›å»ºç¯å¢ƒ
    env = SM_env_with_stale(
        max_hidden_block=20,
        attacker_fraction=alpha,
        follower_fraction=0.5,
        rule="longest"
    )
    
    # åŠ è½½è®­ç»ƒå¥½çš„SquirRLç­–ç•¥
    policy = load_squirrl_policy()
    
    # è¿è¡Œå¤šæ¬¡æ¨¡æ‹Ÿ
    results = []
    for episode in range(num_episodes):
        state = env.reset()
        episode_reward = 0
        
        for step in range(10000):
            action = policy.act(state)
            next_state, reward, done, info = env.step(state, action)
            episode_reward += reward
            state = next_state
            if done:
                break
        
        results.append({
            'episode': episode,
            'total_reward': episode_reward,
            'relative_reward': info['relative_reward'],
            'blocks_won': info['attacker_blocks'],
            'reorgs': info['num_reorgs']
        })
    
    # ç»Ÿè®¡
    results_df = pd.DataFrame(results)
    
    return {
        'date': attack_date,
        'pool': target_pool,
        'alpha': alpha,
        'mean_relative_reward': results_df['relative_reward'].mean(),
        'std_relative_reward': results_df['relative_reward'].std(),
        'attack_success_rate': (results_df['relative_reward'] > alpha).mean(),
        'max_reorgs': results_df['reorgs'].max()
    }

# æ‰¹é‡åˆ†æå…¨å¹´
critical_dates = pd.date_range('2023-01-01', '2023-12-31', freq='W')
pools_to_test = ['FoundryUSA', 'AntPool', 'F2Pool']

all_results = []
for date in critical_dates:
    for pool in pools_to_test:
        result = counterfactual_attack_simulation(
            pools_data, pool, date
        )
        all_results.append(result)
        print(f"Completed: {date.date()} - {pool}")

results_df = pd.DataFrame(all_results)
results_df.to_csv('results/real_data_backtest.csv', index=False)
```

#### ç¬¬å››æ­¥ï¼šå¯è§†åŒ–ï¼ˆWeek 3ï¼Œ1äººï¼‰

**æ—¶é—´è½´å¯è§†åŒ–**ï¼š
```python
import plotly.graph_objects as go
from plotly.subplots import make_subplots

def create_vulnerability_timeline(results_df):
    """åˆ›å»ºå¨èƒæ—¶é—´è½´"""
    
    fig = make_subplots(
        rows=2, cols=1,
        shared_xaxes=True,
        subplot_titles=('ç®—åŠ›åˆ†å¸ƒ', 'æ”»å‡»æ”¶ç›Š')
    )
    
    # ä¸Šå›¾ï¼šç®—åŠ›åˆ†å¸ƒ
    for pool in results_df['pool'].unique():
        pool_data = results_df[results_df['pool'] == pool]
        fig.add_trace(
            go.Scatter(
                x=pool_data['date'],
                y=pool_data['alpha'] * 100,
                name=pool,
                mode='lines'
            ),
            row=1, col=1
        )
    
    # ä¸‹å›¾ï¼šæ”»å‡»ç›¸å¯¹æ”¶ç›Š
    for pool in results_df['pool'].unique():
        pool_data = results_df[results_df['pool'] == pool]
        fig.add_trace(
            go.Scatter(
                x=pool_data['date'],
                y=(pool_data['mean_relative_reward'] - pool_data['alpha']) * 100,
                name=pool,
                mode='markers+lines',
                marker=dict(
                    size=10,
                    color=pool_data['attack_success_rate'],
                    colorscale='RdYlGn_r',
                    showscale=True,
                    colorbar=dict(title="æˆåŠŸç‡")
                )
            ),
            row=2, col=1
        )
    
    # æ ‡è®°"é«˜å±æ—¶åˆ»"
    high_risk_dates = results_df[
        results_df['mean_relative_reward'] - results_df['alpha'] > 0.05
    ]['date']
    
    for date in high_risk_dates:
        fig.add_vline(
            x=date, 
            line_dash="dash", 
            line_color="red",
            annotation_text="é«˜å±"
        )
    
    fig.update_layout(
        title="2023å¹´æ¯”ç‰¹å¸ç½‘ç»œå¨èƒè¯„ä¼°",
        xaxis_title="æ—¥æœŸ",
        yaxis_title="ç®—åŠ›å æ¯” (%)",
        yaxis2_title="é¢å¤–æ”¶ç›Š (%)",
        height=800
    )
    
    fig.write_html('results/vulnerability_timeline.html')
    return fig
```

---

## é™„å½•Bï¼šå¿«é€Ÿå¯åŠ¨æŒ‡å—

### Day 1 è¡ŒåŠ¨æ¸…å•ï¼ˆç»„1 - ç¯å¢ƒè¿ç§»éªŒè¯ï¼‰

**ä¼˜å…ˆçº§ï¼šéªŒè¯è¿ç§» > Dockeré…ç½®**

```bash
# 1. é…ç½®ç°ä»£Pythonç¯å¢ƒ
cd "E:\Course Project\SquirRL"

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install numpy scipy matplotlib pandas
pip install stable-baselines3 torch gymnasium
pip install requests plotly streamlit

# 2. éªŒè¯environment.pyå¯è¿ç§»ï¼ˆå…³é”®æ­¥éª¤ï¼ï¼‰
# åˆ›å»ºæµ‹è¯•è„šæœ¬
python test_migration.py

# test_migration.pyå†…å®¹ï¼š
import sys
sys.path.append('SquirRL-repo/SingleAgent')

from environment import SM_env, SM_env_with_stale

env = SM_env(max_hidden_block=20, 
             attacker_fraction=0.35, 
             follower_fraction=0.5)

state = env.reset()
next_state, reward, done, info = env.step(state, action=2)
print(f"âœ… è¿ç§»æˆåŠŸ: state={state}, reward={reward}")

# 3. (å¯é€‰) é…ç½®DockeréªŒè¯ç¯å¢ƒ
# å¦‚æœä¸Šè¿°è¿ç§»æˆåŠŸï¼ŒDockerå˜ä¸ºå¯é€‰
# åªåœ¨Week 1 Day 3é…ç½®ï¼Œç”¨äºéªŒè¯baseline

# å®‰è£…Docker Desktop (Windows)
# ä¸‹è½½ï¼šhttps://www.docker.com/products/docker-desktop/

# æ„å»ºéªŒè¯é•œåƒ
docker build -t squirrl-legacy:v1.0 -f legacy_docker/Dockerfile .

# è¿è¡ŒbaselineéªŒè¯ï¼ˆè·‘1æ¬¡ï¼‰
docker run --rm squirrl-legacy:v1.0 \
  python SingleAgent/btc.py --alpha 0.35 --episodes 5
```

### Week 1 æ£€æŸ¥ç‚¹

**å‘¨äº”ä¸‹åˆå…¨å‘˜ä¼šè®®æ£€æŸ¥ï¼ˆæ–°ç­–ç•¥ï¼‰**ï¼š
- [ ] âœ… **environment.pyè¿ç§»æˆåŠŸï¼Ÿ**ï¼ˆæœ€å…³é”®ï¼ï¼‰
- [ ] âœ… **GymåŒ…è£…å™¨èƒ½è¿è¡Œï¼Ÿ**
- [ ] âœ… **SB3è®­ç»ƒè„šæœ¬èƒ½æ”¶æ•›ï¼Ÿ**
- [ ] âœ… **æ•°æ®é‡‡é›†è„šæœ¬å¼€å§‹å·¥ä½œï¼Ÿ**ï¼ˆæ–¹æ¡ˆBï¼‰
- [ ] æ‰€æœ‰äººéƒ½ç†è§£äº†è®ºæ–‡åŸç†ï¼Ÿ
- [ ] åˆ†å·¥æ˜ç¡®äº†å—ï¼Ÿ
- [ ] (å¯é€‰) DockeréªŒè¯å®Œæˆï¼Ÿ

**å¦‚æœè¿ç§»å¤±è´¥**ï¼š
- ç«‹å³åˆ‡æ¢åˆ°çº¯Dockeræ–¹æ¡ˆ
- é‡æ–°åˆ†é…äººå‘˜ï¼ˆæ›´å¤šäººé…ç½®Dockerï¼‰
- è°ƒæ•´æ—¶é—´è¡¨

---

## ç»“è¯­

è¿™ä¸ªé¡¹ç›®çœ‹ä¼¼å¤æ‚ï¼Œä½†åªè¦ï¼š
1. âœ… **Week 1 Day 1** éªŒè¯ç¯å¢ƒè¿ç§»ï¼ˆ30åˆ†é’Ÿå†³å®šæˆè´¥ï¼‰
2. âœ… **Week 1** é…ç½®ç°ä»£å¼€å‘ç¯å¢ƒ + å¯åŠ¨æ•°æ®é‡‡é›†
3. âœ… **Week 2** å¤ç°å…³é”®ç»“æœ + æ‰©å±•å®éªŒåŸå‹
4. âœ… **Week 3** å®Œæˆæ–¹æ¡ˆBï¼ˆçœŸå®æ•°æ®å›æµ‹ï¼‰
5. âœ… **Week 3.5** æ•´ç†æ–‡æ¡£ + ç­”è¾©å‡†å¤‡

å°±èƒ½ç¨³ç¨³æ‹¿åˆ°85-90åˆ†ä»¥ä¸Šã€‚

### æ ¸å¿ƒç­–ç•¥å›é¡¾
- **éƒ¨åˆ†è¿ç§»**ï¼šæå–environment.pyåˆ°ç°ä»£ç¯å¢ƒ,ç”¨SB3é‡å†™è®­ç»ƒ
- **Dockerå¯é€‰**ï¼šä»…ç”¨äºéªŒè¯baseline,ä¸æ˜¯ä¸»å¼€å‘ç¯å¢ƒ
- **æ–¹æ¡ˆBä¼˜å…ˆ**ï¼šçœŸå®æ•°æ®å›æµ‹æ˜¯æœ€å¤§äº®ç‚¹
- **ä¿æŒçµæ´»**ï¼šè¿ç§»å¤±è´¥å¯ç«‹å³å›é€€åˆ°Docker

è®°ä½ï¼š**å®Œæˆ > å®Œç¾**ï¼Œ**æ•ˆç‡ > å®Œç¾å¤ç°**ï¼

---

## æ–¹æ¡ˆBé›†æˆæ€»ç»“

### âœ… åŠ å…¥æ–¹æ¡ˆBåçš„ä¼˜åŠ¿

1. **åˆ›æ–°æ€§æå‡** â­â­â­â­â­
   - ä»"ç†è®ºæ¨¡æ‹Ÿ" â†’ "çœŸå®æ•°æ®éªŒè¯"
   - å¡«è¡¥åŸè®ºæ–‡çš„ç©ºç™½ï¼ˆåŸè®ºæ–‡åªåšç†è®ºåˆ†æï¼‰

2. **å®ç”¨ä»·å€¼æ˜¾è‘—** â­â­â­â­â­
   - çœŸå®å¨èƒè¯„ä¼°ï¼ˆä¸æ˜¯çº¸ä¸Šè°ˆå…µï¼‰
   - å¯ä»¥è¯†åˆ«å†å²ä¸Šçš„"æœ€è„†å¼±æ—¶åˆ»"
   - å¯¹æœªæ¥æœ‰é¢„è­¦æ„ä¹‰

3. **æŠ€æœ¯æ·±åº¦å¢åŠ ** â­â­â­â­
   - æ•°æ®å·¥ç¨‹ï¼ˆçˆ¬å–ã€æ¸…æ´—ã€å¤„ç†ï¼‰
   - å¤§è§„æ¨¡æ¨¡æ‹Ÿï¼ˆæ‰¹é‡å®éªŒï¼‰
   - æ—¶é—´åºåˆ—åˆ†æ

4. **ç­”è¾©äº®ç‚¹æ˜æ˜¾** â­â­â­â­â­
   - æœ‰çœŸå®æ•°æ®æ”¯æ’‘ï¼ˆæ›´æœ‰è¯´æœåŠ›ï¼‰
   - å¯è§†åŒ–æ•ˆæœå¥½ï¼ˆæ—¶é—´è½´ã€çƒ­åŠ›å›¾ï¼‰
   - èƒ½å›ç­”"çœŸå®å¨èƒæœ‰å¤šå¤§"è¿™ä¸ªå…³é”®é—®é¢˜

### âš ï¸ æ–°å¢çš„é£é™©

1. **æ•°æ®é‡‡é›†å¯èƒ½å¤±è´¥**ï¼ˆåº”å¯¹ï¼šæå‰å¼€å§‹+å¤‡ç”¨æ•°æ®æºï¼‰
2. **å·¥ä½œé‡å¢åŠ 20-30%**ï¼ˆåº”å¯¹ï¼š2äººä¸“èŒè´Ÿè´£æ–¹æ¡ˆBï¼‰
3. **æ—¶é—´æ›´ç´§å¼ **ï¼ˆåº”å¯¹ï¼šå…¶ä»–æ‰©å±•é™çº§ä¸ºå¯é€‰ï¼‰

### ğŸ¯ é¢„æœŸå¾—åˆ†æå‡

| æ–¹æ¡ˆ | é¢„æœŸå¾—åˆ† | æ–¹æ¡ˆBè´¡çŒ® |
|------|---------|-----------|
| åŸæ–¹æ¡ˆï¼ˆä¸å«æ–¹æ¡ˆBï¼‰ | 81-88åˆ† | - |
| **æ–°æ–¹æ¡ˆï¼ˆå«æ–¹æ¡ˆBåŸºç¡€ç‰ˆï¼‰** | **86-90åˆ†** | **+5-8åˆ†** |
| **æ–°æ–¹æ¡ˆï¼ˆå«æ–¹æ¡ˆBå®Œæ•´ç‰ˆï¼‰** | **91-95åˆ†** | **+10-12åˆ†** |

### ğŸ’¡ å…³é”®æˆåŠŸå› ç´ 

1. âœ… **Week 1å¿…é¡»å¼€å§‹æ•°æ®é‡‡é›†**ï¼ˆä¸èƒ½æ‹–ï¼‰
2. âœ… **2äººå…¨èŒè´Ÿè´£æ–¹æ¡ˆB**ï¼ˆä¸èƒ½å…¼èŒï¼‰
3. âœ… **æœ‰ä¿åº•æ–¹æ¡ˆ**ï¼ˆè‡³å°‘3ä¸ªå…³é”®æ—¥æœŸï¼‰
4. âœ… **ä¼˜å…ˆå¯è§†åŒ–**ï¼ˆæ—¶é—´è½´æ¯”å…¶ä»–æ‰©å±•æ›´é‡è¦ï¼‰

---

## éƒ¨åˆ†è¿ç§»ç­–ç•¥æ€»ç»“

### ğŸ¯ æ ¸å¿ƒå†³ç­–é€»è¾‘

```
é—®é¢˜ï¼šSquirRLé¡¹ç›®ä¾èµ–Python 3.6 + TensorFlow 1.14ï¼ˆ2019å¹´æŠ€æœ¯æ ˆï¼‰

è¯„ä¼°ä¸‰ç§æ–¹æ¡ˆï¼š
â”œâ”€ æ–¹æ¡ˆAï¼šçº¯Dockerå°è£…
â”‚  â”œâ”€ ä¼˜ç‚¹ï¼šå®Œå…¨å¤ç°åŸç¯å¢ƒ
â”‚  â””â”€ ç¼ºç‚¹ï¼šå¼€å‘æ•ˆç‡ä½ï¼Œè°ƒè¯•å›°éš¾ï¼Œæ–¹æ¡ˆBéš¾å®ç°
â”‚
â”œâ”€ æ–¹æ¡ˆBï¼šéƒ¨åˆ†è¿ç§» âœ… é€‰æ‹©
â”‚  â”œâ”€ å…³é”®å‘ç°ï¼šenvironment.pyä¸ä¾èµ–TensorFlowï¼
â”‚  â”œâ”€ ç­–ç•¥ï¼šæå–ç¯å¢ƒ + ç°ä»£è®­ç»ƒæ¡†æ¶ + DockeréªŒè¯
â”‚  â”œâ”€ ä¼˜ç‚¹ï¼šæ•ˆç‡é«˜10å€ï¼Œä»£ç ç°ä»£åŒ–ï¼Œæ–¹æ¡ˆBæ˜“å®ç°
â”‚  â””â”€ é£é™©ï¼šéœ€éªŒè¯è¿ç§»æ­£ç¡®æ€§ï¼ˆç”¨DockeréªŒè¯ï¼‰
â”‚
â””â”€ æ–¹æ¡ˆCï¼šå®Œå…¨é‡å†™
   â”œâ”€ ä¼˜ç‚¹ï¼šå®Œå…¨ç°ä»£åŒ–
   â””â”€ ç¼ºç‚¹ï¼šæ—¶é—´ä¸å¤Ÿï¼ˆ2-3å‘¨ï¼‰ï¼Œé£é™©é«˜ï¼ˆæ— baselineï¼‰
```

### âœ… æŠ€æœ¯éªŒè¯ç»“æœ

```python
# éªŒè¯ç»“è®ºï¼šenvironment.py ç‹¬ç«‹äº TensorFlow
$ grep -r "import tensorflow" SquirRL-repo/SingleAgent/environment.py
# æ— ç»“æœï¼

$ grep -r "import" SquirRL-repo/SingleAgent/environment.py
import numpy as np
import scipy
import matplotlib.pyplot as plt
import mdptoolbox
# âœ… åªä¾èµ–é€šç”¨ç§‘å­¦è®¡ç®—åº“ï¼Œå®Œå…¨å¯è¿ç§»ï¼
```

### ğŸ“Š ä¸‰æ–¹æ¡ˆå¯¹æ¯”ï¼ˆæœ€ç»ˆç‰ˆï¼‰

| ç»´åº¦ | çº¯Docker | **éƒ¨åˆ†è¿ç§»ï¼ˆé€‰æ‹©ï¼‰** | å®Œå…¨é‡å†™ |
|------|---------|-------------------|---------|
| å¼€å‘æ•ˆç‡ | â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| è°ƒè¯•ä½“éªŒ | â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| é…ç½®éš¾åº¦ | â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| æ—¶é—´æŠ•å…¥ | 1å‘¨é…ç½® | 3å¤©é…ç½® | 2-3å‘¨é‡å†™ |
| æˆåŠŸæ¦‚ç‡ | 90% | **95%** | 20% |
| æ–¹æ¡ˆBæ”¯æŒ | â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| ä»£ç ç°ä»£åŒ– | â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| ç»“æœå¯é æ€§ | â­â­â­â­â­ | â­â­â­â­ | â­â­ |

### ğŸ› ï¸ å®æ–½æ¶æ„ï¼ˆæœ€ç»ˆç‰ˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸»å¼€å‘ç¯å¢ƒï¼ˆPython 3.9+ï¼‰                          â”‚
â”‚  ==========================================        â”‚
â”‚  ğŸ“¦ environment.pyï¼ˆç›´æ¥è¿ç§»ï¼Œå·²éªŒè¯å¯è¡Œï¼‰         â”‚
â”‚  ğŸ¤– Stable-Baselines3ï¼ˆæ›¿ä»£æ‰‹å†™TF 1.14 DQNï¼‰      â”‚
â”‚  âœ¨ æ‰©å±•æ¨¡å—ï¼š                                     â”‚
â”‚     - DynamicAlphaEnvï¼ˆå‘¨æœŸæ€§/è·³è·ƒç®—åŠ›ï¼‰          â”‚
â”‚     - DefenseWrapperï¼ˆUTB/DDAé˜²å¾¡ï¼‰              â”‚
â”‚     - RealDataAlphaProcessï¼ˆæ–¹æ¡ˆBæ ¸å¿ƒï¼‰          â”‚
â”‚  ğŸ“Š ç°ä»£å¯è§†åŒ–ï¼šPlotly + Streamlit                â”‚
â”‚  âš¡ å¼€å‘ä½“éªŒï¼šVSCodeè°ƒè¯• + å¿«é€Ÿè¿­ä»£                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  DockeréªŒè¯ç¯å¢ƒï¼ˆå¯é€‰ï¼ŒWeek 1é…ç½®ï¼‰                â”‚
â”‚  ==========================================        â”‚
â”‚  ğŸ³ Python 3.6 + TensorFlow 1.14                  â”‚
â”‚  ğŸ¯ ç”¨é€”ï¼šéªŒè¯baselineï¼ˆè·‘1-2æ¬¡ï¼‰                 â”‚
â”‚  âš ï¸ ä¸ç”¨äºæ—¥å¸¸å¼€å‘                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä»£ç é‡å¯¹æ¯”ï¼š
- åŸTF 1.14å®ç°ï¼š~500è¡Œï¼ˆæ‰‹å†™DQNï¼‰
- SB3ç°ä»£å®ç°ï¼š~50è¡Œï¼ˆè°ƒç”¨åº“ï¼‰
- å‡å°‘90%ä»£ç é‡ï¼Œæå‡10å€æ•ˆç‡ï¼
```

### âš¡ æ•ˆç‡æå‡è¯æ®

| æ“ä½œ | çº¯Dockeræ–¹æ¡ˆ | éƒ¨åˆ†è¿ç§»æ–¹æ¡ˆ | æå‡ |
|------|------------|-------------|------|
| ä¿®æ”¹ä»£ç å¹¶æµ‹è¯• | 5-10åˆ†é’Ÿ | 30ç§’ | **20å€** |
| è°ƒè¯•å•æ­¥æ‰§è¡Œ | å›°éš¾ï¼ˆæ—¥å¿—ï¼‰ | å®¹æ˜“ï¼ˆVSCodeæ–­ç‚¹ï¼‰ | **è´¨çš„é£è·ƒ** |
| è®­ç»ƒä»£ç é‡ | ~500è¡Œ | ~50è¡Œ | **10å€** |
| å®‰è£…ä¾èµ– | å¤æ‚ï¼ˆDockerï¼‰ | ç®€å•ï¼ˆpipï¼‰ | **5å€** |
| æ–¹æ¡ˆBæ•°æ®å¤„ç† | å›°éš¾ï¼ˆè€åº“ï¼‰ | å®¹æ˜“ï¼ˆpandas/plotlyï¼‰ | **æ— é™** |

### ğŸ›¡ï¸ é£é™©æ§åˆ¶

**å…³é”®éªŒè¯ç‚¹ï¼ˆWeek 1 Day 1ä¸Šåˆï¼Œ30åˆ†é’Ÿï¼‰**ï¼š
```python
# test_migration.py
import sys
sys.path.append('SquirRL-repo/SingleAgent')
from environment import SM_env_with_stale

env = SM_env_with_stale(
    max_hidden_block=20,
    attacker_fraction=0.35,
    follower_fraction=0.5
)

state = env.reset()
next_state, reward, done, info = env.step(state, action=2)

# å¦‚æœè¿™æ®µä»£ç èƒ½è·‘é€šï¼Œè¿ç§»ç­–ç•¥å¯è¡Œï¼
# å¦‚æœå¤±è´¥ï¼Œç«‹å³å›é€€åˆ°çº¯Dockeræ–¹æ¡ˆ
print("âœ… è¿ç§»éªŒè¯æˆåŠŸï¼")
```

**ä¿é™©æœºåˆ¶**ï¼š
- âœ… Dockerä½œä¸ºbackupï¼ˆå¦‚æœè¿ç§»å¤±è´¥ï¼‰
- âœ… å¯ä»¥éšæ—¶å›é€€åˆ°æ–¹æ¡ˆA
- âœ… Week 1å°±åšå†³ç­–ï¼Œæ—¶é—´å……è¶³

### ğŸ’¡ ä¸ºä»€ä¹ˆè¿™æ˜¯æœ€ä¼˜è§£ï¼Ÿ

1. **è¯†åˆ«å…³é”®ä¾èµ–**ï¼š
   - environment.pyï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰âœ… ä¸ä¾èµ–TF
   - è®­ç»ƒè„šæœ¬ï¼ˆbtc.pyï¼‰âŒ ä¾èµ–TF 1.14
   - **ç»“è®º**ï¼šåªéœ€é‡å†™è®­ç»ƒéƒ¨åˆ†ï¼Œç¯å¢ƒå¯å¤ç”¨

2. **åˆ©ç”¨ç°ä»£å·¥å…·**ï¼š
   - Stable-Baselines3ï¼šæˆç†Ÿçš„DRLåº“
   - Gymnasiumï¼šæ ‡å‡†RLæ¥å£
   - Plotly/Streamlitï¼šç°ä»£å¯è§†åŒ–
   - **ä»£ç é‡å‡å°‘90%ï¼Œè´¨é‡æå‡**

3. **ä¿æŒéªŒè¯èƒ½åŠ›**ï¼š
   - Docker baselineä½œä¸ºå‚ç…§
   - å¯ä»¥å¯¹æ¯”éªŒè¯è¿ç§»æ­£ç¡®æ€§
   - **æ—¢æœ‰æ•ˆç‡ï¼Œåˆæœ‰å¯é æ€§**

4. **æ”¯æŒæ–¹æ¡ˆB**ï¼š
   - çœŸå®æ•°æ®é‡‡é›†éœ€è¦ç°ä»£åº“ï¼ˆrequests, pandasï¼‰
   - æ—¶é—´è½´å¯è§†åŒ–éœ€è¦Plotly
   - **åœ¨è€ç¯å¢ƒä¸­å¾ˆéš¾å®ç°**

---

æœ‰é—®é¢˜éšæ—¶è®¨è®ºï¼Œç¥é¡¹ç›®é¡ºåˆ©ï¼ğŸ‰ğŸš€

**æœ€åæé†’**ï¼š
1. **Week 1 Day 1ä¸Šåˆ**ï¼šç«‹å³éªŒè¯ç¯å¢ƒè¿ç§»ï¼ˆ30åˆ†é’Ÿå†³å®šæˆè´¥ï¼‰
2. æ–¹æ¡ˆBæ˜¯äº®ç‚¹ï¼Œä½†ä¸è¦All inã€‚å…ˆä¿è¯å¤ç°ï¼ˆ82åˆ†ï¼‰ï¼Œå†å†²åˆºæ–¹æ¡ˆBï¼ˆ90åˆ†ï¼‰
3. éƒ¨åˆ†è¿ç§»æ˜¯**å·¥ç¨‹åˆ¤æ–­**ï¼Œä¸æ˜¯å·æ‡’ã€‚ç†è§£è¿™ä¸ªé€»è¾‘ï¼Œç­”è¾©æ—¶èƒ½è®²æ¸…æ¥šï¼

